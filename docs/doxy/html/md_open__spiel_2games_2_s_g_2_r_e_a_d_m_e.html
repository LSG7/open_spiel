<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>open spiel: Env</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">open spiel
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Env</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1"></a></p><ul>
<li>source env_sg.sh (환경변수) <br  />
</li>
<li>source venv/bin/activate <br  />
</li>
</ul>
<p>빌드 방법 두가지.</p><ol type="1">
<li>open spiel 에서 제공하는 방법. clang 을 쓴다. <br  />
 ./build_sg.sh</li>
<li>내가 만든 방법. gcc clang 중에 골라 쓴다. gcc,clang 선택은 env_sg.sh 에서. <br  />
 cd build_sg bash ../set_cmake_manual.sh (처음 한번만. cmake 설정용) <br  />
 make -j8 kbg_test</li>
</ol>
<ul>
<li>bfloat16 변수가 컴파일러마다 다르다.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Program flow</h1>
<ol type="1">
<li>User 가 만든 게임(BaseT 를 상속한) 의 State 객체가 생성될 때 init_first() 를 호출한다.(반드시)</li>
<li>init_first() 에서 가장 먼저 init_server() 를 호출하고 파이선 클라이언트가 달라붙기를 기다린다. 기다리지 않고 진행해도 됨.</li>
<li>Cell, Unit 정보가 변경 될 때마다 클라이언트에게 변경된 정보를 보낸다. Observation 정보를 전부 다 매번 보내는건 불필요, 메모리낭비 라서, 변경된 것만 기록하고 송신한다.</li>
</ol>
<h1><a class="anchor" id="autotoc_md3"></a>
Ground Rule</h1>
<ul>
<li>정형화 시켜서 재사용 원활히</li>
<li>순차적 주석으로 로직 심플&amp;이해쉽게</li>
<li>확장성. 나중에 대규모로 확장 가능하게.</li>
<li>관련 앱과 데이터 호환 용이</li>
<li>학습에 사용하기 용이</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
TODO</h1>
<ol type="1">
<li>하나의 게임에서 self-play 로 trajectory 를 2개 만들어야 한다. 어차피 상대방 역할 해주는 봇도 있어야 하는데 그 봇도 똑똑해야 하고 하는김에 궤적 하나 더 만드는게 효율성 좋으니 <br  />
</li>
<li>joint action 으로 만들어야 한다. 한번은 이동하고 한번은 행동하고 deepnash 는 선택,행동 이었다면 나는 이동,행동 이다.</li>
</ol>
<h1><a class="anchor" id="autotoc_md5"></a>
일기</h1>
<p>23.8.30 게임 생성 시작 <br  />
</p>
<ul>
<li>셀은 vector [z][y][x], map_coord 로 접근 <br  />
</li>
<li>유닛은 vector [id], unique unit_id 로 접근 <br  />
 0 번 player 는 1번부터 시작. 접근할 때 (p0_id) 으로 접근 <br  />
 1 번 player 는 1001번부터 시작. 접근할 때 (p1_id - 1000) 으로 접근 <br  />
</li>
</ul>
<p>23.10.10 보드 표현 규정</p><ul>
<li>[빈땅은 '_ '] 스페이스는 유닛 개수에 따라 변동적 <br  />
</li>
<li>[유닛은 'player_id + unit_id] ex=[01] <br  />
</li>
</ul>
<p>23.10.12</p><ul>
<li>수동빌드 할 때 BUILD_TYPE=Debug 해줘야 -g 옵션 들어감</li>
<li>games/ 아래에서 CMakeLists.txt 에서 빌드해줘야 실행 파일에 디버그 들어가서 같이 빌드됨</li>
<li>Interger Encoding vs One-hot Encoding <a href="https://medium.com/geekculture/machine-learning-one-hot-encoding-vs-integer-encoding-f180eb831cf1">https://medium.com/geekculture/machine-learning-one-hot-encoding-vs-integer-encoding-f180eb831cf1</a> <br  />
</li>
<li>유닛 위치의 Z축 = 채널 에 병종을 one-hot, 체력, 공격력, 방어력 표현 <br  />
</li>
<li>Mac 에는 gdb 가 없다. lldb 써야 한다. <br  />
</li>
<li>Mac 에서 vs code 에다가 codeLLDB 깔면 연결된다. F5 로 디버깅 실행</li>
<li>채널에 셀의 정보를 나열하고 Unet 으로 셀의 정보를 분석해야 한다.</li>
<li>셀이 z 축으로 쌓여도 되나?</li>
<li>action id 를 셀 번호로 해야 한다. 근데 셀이 존나 많다.</li>
<li>관찰, 생각, 행동</li>
</ul>
<p>23.10.31</p><ul>
<li>혼합 정밀도를 사용해야 한다. 인풋은 float, 연산은 bf16, 아웃은 ?</li>
<li>obs 를 1D vector 로 만든다. pythoh 에서 이것을 asarray() 하고 reshape() 한다.</li>
</ul>
<p>23.11.6</p><ul>
<li>apple M3 에서는 bf16 지원한다고 하나 apple coreML 문서에는 float16 지원하는 것만 설명되어 있다. 그러니 지금은 일단 float16 으로 만든다.</li>
<li>C++23 부터 float16_t bfloat16_t 존재. c++23 으로 빌드.</li>
<li>gcc g++13 깔아야함. developernote.com/2023/08/installing-gcc13-on-ubuntu-22-04</li>
<li>clang++17 깔아야함. clang 은 STDCPP_FLOAT16_T 지원안해서 못씀. c++23 정식지원까지 사용중지.</li>
<li>Mac 에서도 gcc 써야함.</li>
</ul>
<p>24.7.12</p><ul>
<li>한턴에 몇번 행동 할 것인가, 어떤 행동을 할 것인가</li>
<li>당장은 한턴에 한번만 행동하는 것으로 만들고 실험해봄</li>
<li>발더스3 같은 경우 순서 상관없이 액션1 이동1 이 가능해야 한다. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
