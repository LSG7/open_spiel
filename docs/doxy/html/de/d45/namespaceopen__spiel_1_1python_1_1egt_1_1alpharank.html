<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>open spiel: open_spiel.python.egt.alpharank Namespace Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">open spiel
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../df/dc9/namespaceopen__spiel.html">open_spiel</a></li><li class="navelem"><a class="el" href="../../d9/d47/namespaceopen__spiel_1_1python.html">python</a></li><li class="navelem"><b>egt</b></li><li class="navelem"><a class="el" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html">alpharank</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">open_spiel.python.egt.alpharank Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a36f325f6c22bc87614cea4e3afb6dc67" id="r_a36f325f6c22bc87614cea4e3afb6dc67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36f325f6c22bc87614cea4e3afb6dc67">_get_payoff</a> (payoff_table_k, payoffs_are_hpt_format, strat_profile, k=None)</td></tr>
<tr class="separator:a36f325f6c22bc87614cea4e3afb6dc67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bb78a35650319fd3c53b1f65f3fb259" id="r_a1bb78a35650319fd3c53b1f65f3fb259"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1bb78a35650319fd3c53b1f65f3fb259">_get_singlepop_2player_fitness</a> (payoff_table, payoffs_are_hpt_format, m, my_popsize, my_strat, opponent_strat, use_local_selection_model)</td></tr>
<tr class="separator:a1bb78a35650319fd3c53b1f65f3fb259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4169e78268b52116fc103a4cf12a71e2" id="r_a4169e78268b52116fc103a4cf12a71e2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4169e78268b52116fc103a4cf12a71e2">_get_rho_sr</a> (payoff_table, payoffs_are_hpt_format, m, r, s, alpha, game_is_constant_sum, use_local_selection_model, payoff_sum=None)</td></tr>
<tr class="separator:a4169e78268b52116fc103a4cf12a71e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44fe0f038fc5d39f276ed19dfc1aa353" id="r_a44fe0f038fc5d39f276ed19dfc1aa353"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44fe0f038fc5d39f276ed19dfc1aa353">_get_rho_sr_multipop</a> (payoff_table_k, payoffs_are_hpt_format, k, m, r, s, alpha, use_fast_compute=True)</td></tr>
<tr class="separator:a44fe0f038fc5d39f276ed19dfc1aa353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd2b94bd383d0984100561a0acb09d86" id="r_abd2b94bd383d0984100561a0acb09d86"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abd2b94bd383d0984100561a0acb09d86">_get_singlepop_transition_matrix</a> (payoff_table, payoffs_are_hpt_format, m, alpha, game_is_constant_sum, use_local_selection_model, payoff_sum, use_inf_alpha=False, inf_alpha_eps=0.1)</td></tr>
<tr class="separator:abd2b94bd383d0984100561a0acb09d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a5a8272beefadfcb7248a45cdf1729" id="r_a95a5a8272beefadfcb7248a45cdf1729"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a95a5a8272beefadfcb7248a45cdf1729">_get_multipop_transition_matrix</a> (payoff_tables, payoffs_are_hpt_format, m, alpha, use_inf_alpha=False, inf_alpha_eps=0.1)</td></tr>
<tr class="separator:a95a5a8272beefadfcb7248a45cdf1729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5c830cc6602388790d1c7dfb9ee2ec" id="r_ade5c830cc6602388790d1c7dfb9ee2ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade5c830cc6602388790d1c7dfb9ee2ec">_get_stationary_distr</a> (c)</td></tr>
<tr class="separator:ade5c830cc6602388790d1c7dfb9ee2ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119502729a184a8482674ea8df562537" id="r_a119502729a184a8482674ea8df562537"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a119502729a184a8482674ea8df562537">print_results</a> (payoff_tables, payoffs_are_hpt_format, rhos=None, rho_m=None, c=None, pi=None)</td></tr>
<tr class="separator:a119502729a184a8482674ea8df562537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6e1f38dd2aa9602f192d57e9dfae90" id="r_aba6e1f38dd2aa9602f192d57e9dfae90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aba6e1f38dd2aa9602f192d57e9dfae90">sweep_pi_vs_epsilon</a> (payoff_tables, strat_labels=None, warm_start_epsilon=None, visualize=False, return_epsilon=False, min_iters=10, max_iters=100, min_epsilon=1e-14, num_strats_to_label=10, legend_sort_clusters=False)</td></tr>
<tr class="separator:aba6e1f38dd2aa9602f192d57e9dfae90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae26b19ec0d10b0582353a0ad8d2c8bd5" id="r_ae26b19ec0d10b0582353a0ad8d2c8bd5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae26b19ec0d10b0582353a0ad8d2c8bd5">sweep_pi_vs_alpha</a> (payoff_tables, strat_labels=None, warm_start_alpha=None, visualize=False, return_alpha=False, m=50, rtol=1e-5, atol=1e-8, num_strats_to_label=10, legend_sort_clusters=False)</td></tr>
<tr class="separator:ae26b19ec0d10b0582353a0ad8d2c8bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f82ec4deddf6b6187090979afc88f69" id="r_a2f82ec4deddf6b6187090979afc88f69"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2f82ec4deddf6b6187090979afc88f69">compute_and_report_alpharank</a> (payoff_tables, m=50, alpha=100, verbose=False, num_top_strats_to_print=8)</td></tr>
<tr class="separator:a2f82ec4deddf6b6187090979afc88f69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dad027ee92dd7238a80b03984d98f52" id="r_a3dad027ee92dd7238a80b03984d98f52"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3dad027ee92dd7238a80b03984d98f52">compute</a> (payoff_tables, m=50, alpha=100, use_local_selection_model=True, verbose=False, use_inf_alpha=False, inf_alpha_eps=0.01)</td></tr>
<tr class="separator:a3dad027ee92dd7238a80b03984d98f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bd833be2f4b192492640c7ecc05ea78" id="r_a5bd833be2f4b192492640c7ecc05ea78"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5bd833be2f4b192492640c7ecc05ea78">suggest_alpha</a> (payoff_tables, tol=.1)</td></tr>
<tr class="separator:a5bd833be2f4b192492640c7ecc05ea78"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Implementation of Alpha-Rank for general games.

Namely, computes fixation probabilities, Markov chain, and associated
stationary distribution given a population size and payoff matrix involving
n-strategy interactions.

All equations and variable names correspond to the following paper:
  https://arxiv.org/abs/1903.01373</pre> </div><h2 class="groupheader">Function Documentation</h2>
<a id="a95a5a8272beefadfcb7248a45cdf1729" name="a95a5a8272beefadfcb7248a45cdf1729"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95a5a8272beefadfcb7248a45cdf1729">&#9670;&#160;</a></span>_get_multipop_transition_matrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank._get_multipop_transition_matrix </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_tables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoffs_are_hpt_format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alpha</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_inf_alpha</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>inf_alpha_eps</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0.1</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Gets Markov transition matrix for multipopulation games.</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00322">322</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  327</span>                                    inf_alpha_eps=0.1):</div>
<div class="line"><span class="lineno">  328</span>  <span class="stringliteral">&quot;&quot;&quot;Gets Markov transition matrix for multipopulation games.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  329</span> </div>
<div class="line"><span class="lineno">  330</span>  num_strats_per_population = utils.get_num_strats_per_population(</div>
<div class="line"><span class="lineno">  331</span>      payoff_tables, payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  332</span>  num_profiles = utils.get_num_profiles(num_strats_per_population)</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>  eta = 1. / (np.sum(num_strats_per_population - 1))</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>  c = np.zeros((num_profiles, num_profiles))</div>
<div class="line"><span class="lineno">  337</span>  rhos = np.zeros((num_profiles, num_profiles))</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>  <span class="keywordflow">for</span> id_row_profile <span class="keywordflow">in</span> range(num_profiles):</div>
<div class="line"><span class="lineno">  340</span>    row_profile = utils.get_strat_profile_from_id(num_strats_per_population,</div>
<div class="line"><span class="lineno">  341</span>                                                  id_row_profile)</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>    next_profile_gen = utils.get_valid_next_profiles(num_strats_per_population,</div>
<div class="line"><span class="lineno">  344</span>                                                     row_profile)</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>    <span class="keywordflow">for</span> index_population_that_changed, col_profile <span class="keywordflow">in</span> next_profile_gen:</div>
<div class="line"><span class="lineno">  347</span>      id_col_profile = utils.get_id_from_strat_profile(</div>
<div class="line"><span class="lineno">  348</span>          num_strats_per_population, col_profile)</div>
<div class="line"><span class="lineno">  349</span>      <span class="keywordflow">if</span> use_inf_alpha:</div>
<div class="line"><span class="lineno">  350</span>        payoff_col = _get_payoff(</div>
<div class="line"><span class="lineno">  351</span>            payoff_tables[index_population_that_changed],</div>
<div class="line"><span class="lineno">  352</span>            payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  353</span>            col_profile,</div>
<div class="line"><span class="lineno">  354</span>            k=index_population_that_changed)</div>
<div class="line"><span class="lineno">  355</span>        payoff_row = _get_payoff(</div>
<div class="line"><span class="lineno">  356</span>            payoff_tables[index_population_that_changed],</div>
<div class="line"><span class="lineno">  357</span>            payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  358</span>            row_profile,</div>
<div class="line"><span class="lineno">  359</span>            k=index_population_that_changed)</div>
<div class="line"><span class="lineno">  360</span>        <span class="keywordflow">if</span> np.isclose(payoff_col, payoff_row, atol=1e-14):</div>
<div class="line"><span class="lineno">  361</span>          c[id_row_profile, id_col_profile] = eta * 0.5</div>
<div class="line"><span class="lineno">  362</span>        <span class="keywordflow">elif</span> payoff_col &gt; payoff_row:</div>
<div class="line"><span class="lineno">  363</span>          <span class="comment"># Transition to col strategy since its payoff is higher than row</span></div>
<div class="line"><span class="lineno">  364</span>          <span class="comment"># strategy, but remove some small amount of mass, inf_alpha_eps, to</span></div>
<div class="line"><span class="lineno">  365</span>          <span class="comment"># keep the chain irreducible</span></div>
<div class="line"><span class="lineno">  366</span>          c[id_row_profile, id_col_profile] = eta * (1 - inf_alpha_eps)</div>
<div class="line"><span class="lineno">  367</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  368</span>          <span class="comment"># Transition with very small probability</span></div>
<div class="line"><span class="lineno">  369</span>          c[id_row_profile, id_col_profile] = eta * inf_alpha_eps</div>
<div class="line"><span class="lineno">  370</span>      <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  371</span>        rhos[id_row_profile, id_col_profile] = _get_rho_sr_multipop(</div>
<div class="line"><span class="lineno">  372</span>            payoff_table_k=payoff_tables[index_population_that_changed],</div>
<div class="line"><span class="lineno">  373</span>            payoffs_are_hpt_format=payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  374</span>            k=index_population_that_changed,</div>
<div class="line"><span class="lineno">  375</span>            m=m,</div>
<div class="line"><span class="lineno">  376</span>            r=col_profile,</div>
<div class="line"><span class="lineno">  377</span>            s=row_profile,</div>
<div class="line"><span class="lineno">  378</span>            alpha=alpha)</div>
<div class="line"><span class="lineno">  379</span>        c[id_row_profile,</div>
<div class="line"><span class="lineno">  380</span>          id_col_profile] = eta * rhos[id_row_profile, id_col_profile]</div>
<div class="line"><span class="lineno">  381</span>    <span class="comment"># Special case of self-transition</span></div>
<div class="line"><span class="lineno">  382</span>    c[id_row_profile, id_row_profile] = 1 - sum(c[id_row_profile, :])</div>
<div class="line"><span class="lineno">  383</span> </div>
<div class="line"><span class="lineno">  384</span>  <span class="keywordflow">return</span> c, rhos</div>
<div class="line"><span class="lineno">  385</span> </div>
<div class="line"><span class="lineno">  386</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00033">open_spiel.python.egt.alpharank._get_payoff()</a>, and <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00200">open_spiel.python.egt.alpharank._get_rho_sr_multipop()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00712">open_spiel.python.egt.alpharank.compute()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a95a5a8272beefadfcb7248a45cdf1729_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a95a5a8272beefadfcb7248a45cdf1729_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a95a5a8272beefadfcb7248a45cdf1729_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a95a5a8272beefadfcb7248a45cdf1729_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,218,46"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="526,5,738,46"/>
<area shape="poly" title=" " alt="" coords="218,20,266,19,478,19,511,20,511,25,478,24,266,24,218,25"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a44fe0f038fc5d39f276ed19dfc1aa353" title=" " alt="" coords="266,33,478,74"/>
<area shape="poly" title=" " alt="" coords="218,34,250,38,250,43,218,40"/>
<area shape="poly" title=" " alt="" coords="478,40,510,36,511,41,479,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a95a5a8272beefadfcb7248a45cdf1729_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a95a5a8272beefadfcb7248a45cdf1729_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a95a5a8272beefadfcb7248a45cdf1729_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a95a5a8272beefadfcb7248a45cdf1729_icgraph">
<area shape="rect" title=" " alt="" coords="626,71,838,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,78,578,104"/>
<area shape="poly" title=" " alt="" coords="610,94,578,94,578,88,610,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,5,268,46"/>
<area shape="poly" title=" " alt="" coords="367,77,236,49,237,44,368,72"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,71,262,111"/>
<area shape="poly" title=" " alt="" coords="300,94,262,94,262,88,300,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,136,262,177"/>
<area shape="poly" title=" " alt="" coords="368,110,237,138,236,133,367,105"/>
</map>
</div>

</div>
</div>
<a id="a36f325f6c22bc87614cea4e3afb6dc67" name="a36f325f6c22bc87614cea4e3afb6dc67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36f325f6c22bc87614cea4e3afb6dc67">&#9670;&#160;</a></span>_get_payoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank._get_payoff </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_table_k</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoffs_are_hpt_format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>strat_profile</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>k</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Gets the payoff of the k-th agent in a single or multi-population game.

Namely, accepts the payoff table of the k-th agent (which can be matrix or
HPT format), the index k of the agent of interest (so its payoff can be looked
up in case of an HPT format payoff table), and the pure strategy profile.

For multipopulation games, we currently only support games where the k-th
agent's payoff is a function of the HPT distribution (a vector
indicating the number of players playing each strategy), as opposed to the
strategy profile (a vector indicating the strategy of each player). This is
due to the nature of the PayoffTable class, which currently only tracks
distributions in the first k columns (rather than profiles).

Args:
  payoff_table_k: The k-th agent's payoff table, in matrix or HPT format.
  payoffs_are_hpt_format: Boolean indicating whether payoff_table_k is a
    _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT) or a
    numpy array. True indicates HPT format, False indicates numpy array.
  strat_profile: The pure strategy profile.
  k: The index of the agent of interest. Only used for HPT case, and only &gt;0
    for a multi-population game.

Returns:
  The k-th agent's payoff.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00033">33</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   33</span><span class="keyword">def </span>_get_payoff(payoff_table_k, payoffs_are_hpt_format, strat_profile, k=None):</div>
<div class="line"><span class="lineno">   34</span>  <span class="stringliteral">&quot;&quot;&quot;Gets the payoff of the k-th agent in a single or multi-population game.</span></div>
<div class="line"><span class="lineno">   35</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   36</span><span class="stringliteral">  Namely, accepts the payoff table of the k-th agent (which can be matrix or</span></div>
<div class="line"><span class="lineno">   37</span><span class="stringliteral">  HPT format), the index k of the agent of interest (so its payoff can be looked</span></div>
<div class="line"><span class="lineno">   38</span><span class="stringliteral">  up in case of an HPT format payoff table), and the pure strategy profile.</span></div>
<div class="line"><span class="lineno">   39</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   40</span><span class="stringliteral">  For multipopulation games, we currently only support games where the k-th</span></div>
<div class="line"><span class="lineno">   41</span><span class="stringliteral">  agent&#39;s payoff is a function of the HPT distribution (a vector</span></div>
<div class="line"><span class="lineno">   42</span><span class="stringliteral">  indicating the number of players playing each strategy), as opposed to the</span></div>
<div class="line"><span class="lineno">   43</span><span class="stringliteral">  strategy profile (a vector indicating the strategy of each player). This is</span></div>
<div class="line"><span class="lineno">   44</span><span class="stringliteral">  due to the nature of the PayoffTable class, which currently only tracks</span></div>
<div class="line"><span class="lineno">   45</span><span class="stringliteral">  distributions in the first k columns (rather than profiles).</span></div>
<div class="line"><span class="lineno">   46</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   47</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   48</span><span class="stringliteral">    payoff_table_k: The k-th agent&#39;s payoff table, in matrix or HPT format.</span></div>
<div class="line"><span class="lineno">   49</span><span class="stringliteral">    payoffs_are_hpt_format: Boolean indicating whether payoff_table_k is a</span></div>
<div class="line"><span class="lineno">   50</span><span class="stringliteral">      _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT) or a</span></div>
<div class="line"><span class="lineno">   51</span><span class="stringliteral">      numpy array. True indicates HPT format, False indicates numpy array.</span></div>
<div class="line"><span class="lineno">   52</span><span class="stringliteral">    strat_profile: The pure strategy profile.</span></div>
<div class="line"><span class="lineno">   53</span><span class="stringliteral">    k: The index of the agent of interest. Only used for HPT case, and only &gt;0</span></div>
<div class="line"><span class="lineno">   54</span><span class="stringliteral">      for a multi-population game.</span></div>
<div class="line"><span class="lineno">   55</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   56</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   57</span><span class="stringliteral">    The k-th agent&#39;s payoff.</span></div>
<div class="line"><span class="lineno">   58</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">   59</span> </div>
<div class="line"><span class="lineno">   60</span>  <span class="keywordflow">if</span> payoffs_are_hpt_format:</div>
<div class="line"><span class="lineno">   61</span>    <span class="comment"># All games are supported when using HPTs</span></div>
<div class="line"><span class="lineno">   62</span>    <span class="keyword">assert</span> k <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <span class="comment"># Compute HPT distribution (vector of # of players per strategy)</span></div>
<div class="line"><span class="lineno">   65</span>    distribution = payoff_table_k.get_distribution_from_profile(strat_profile)</div>
<div class="line"><span class="lineno">   66</span>    <span class="comment"># Lookup the payoff profile (HPT row) corresponding to the distribution</span></div>
<div class="line"><span class="lineno">   67</span>    payoff_profile = payoff_table_k[tuple(distribution)]</div>
<div class="line"><span class="lineno">   68</span>    <span class="comment"># Return the payoff corresponding to the k-th agent&#39;s strategy</span></div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">return</span> payoff_profile[strat_profile[k]]</div>
<div class="line"><span class="lineno">   70</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">   71</span>    <span class="comment"># Only 2 player symmetric/asymmetric games supported using matrix payoffs</span></div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordflow">return</span> payoff_table_k[tuple(strat_profile)]</div>
<div class="line"><span class="lineno">   73</span> </div>
<div class="line"><span class="lineno">   74</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00327">open_spiel.python.egt.alpharank._get_multipop_transition_matrix()</a>, <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00122">open_spiel.python.egt.alpharank._get_rho_sr()</a>, <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00200">open_spiel.python.egt.alpharank._get_rho_sr_multipop()</a>, <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00077">open_spiel.python.egt.alpharank._get_singlepop_2player_fitness()</a>, <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00259">open_spiel.python.egt.alpharank._get_singlepop_transition_matrix()</a>, and <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00792">open_spiel.python.egt.alpharank.suggest_alpha()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a36f325f6c22bc87614cea4e3afb6dc67_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a36f325f6c22bc87614cea4e3afb6dc67_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a36f325f6c22bc87614cea4e3afb6dc67_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a36f325f6c22bc87614cea4e3afb6dc67_icgraph">
<area shape="rect" title=" " alt="" coords="1453,124,1665,164"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a95a5a8272beefadfcb7248a45cdf1729" title=" " alt="" coords="886,37,1099,78"/>
<area shape="poly" title=" " alt="" coords="1528,114,1474,67,1440,45,1404,28,1360,16,1313,10,1267,8,1220,10,1133,22,1061,39,1059,34,1132,17,1220,5,1266,3,1314,5,1361,11,1406,23,1443,40,1477,62,1531,110"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a4169e78268b52116fc103a4cf12a71e2" title=" " alt="" coords="886,126,1099,167"/>
<area shape="poly" title=" " alt="" coords="1438,143,1405,143,1147,143,1099,144,1099,139,1147,137,1405,137,1438,138"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#abd2b94bd383d0984100561a0acb09d86" title=" " alt="" coords="626,126,838,167"/>
<area shape="poly" title=" " alt="" coords="1504,174,1457,193,1406,207,1325,218,1242,222,1159,221,1078,215,930,194,814,170,815,165,931,189,1079,209,1159,215,1242,217,1324,213,1404,202,1455,188,1502,169"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a44fe0f038fc5d39f276ed19dfc1aa353" title=" " alt="" coords="1170,37,1382,78"/>
<area shape="poly" title=" " alt="" coords="1477,121,1404,99,1346,81,1348,76,1406,94,1478,116"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a1bb78a35650319fd3c53b1f65f3fb259" title=" " alt="" coords="1170,152,1382,192"/>
<area shape="poly" title=" " alt="" coords="1438,159,1383,164,1382,159,1437,154"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a5bd833be2f4b192492640c7ecc05ea78" title=" " alt="" coords="1147,266,1405,307"/>
<area shape="poly" title=" " alt="" coords="1522,176,1469,214,1406,251,1361,268,1359,263,1404,246,1466,210,1519,172"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,106,578,132"/>
<area shape="poly" title=" " alt="" coords="871,74,568,108,567,103,871,68"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,33,268,74"/>
<area shape="poly" title=" " alt="" coords="367,105,236,77,237,72,368,100"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,98,262,139"/>
<area shape="poly" title=" " alt="" coords="300,121,262,121,262,116,300,116"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,164,262,204"/>
<area shape="poly" title=" " alt="" coords="368,138,237,166,236,161,367,133"/>
<area shape="poly" title=" " alt="" coords="871,149,839,149,839,144,871,144"/>
<area shape="poly" title=" " alt="" coords="610,138,578,134,579,129,611,132"/>
<area shape="poly" title=" " alt="" coords="1154,60,1099,60,1099,55,1154,55"/>
<area shape="poly" title=" " alt="" coords="1154,164,1099,159,1100,154,1154,159"/>
</map>
</div>

</div>
</div>
<a id="a4169e78268b52116fc103a4cf12a71e2" name="a4169e78268b52116fc103a4cf12a71e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4169e78268b52116fc103a4cf12a71e2">&#9670;&#160;</a></span>_get_rho_sr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank._get_rho_sr </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_table</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoffs_are_hpt_format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>r</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>s</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alpha</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>game_is_constant_sum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_local_selection_model</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_sum</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Gets fixation probability of rogue strategy r in population playing s.

Args:
  payoff_table: A payoff table.
  payoffs_are_hpt_format: Boolean indicating whether payoff_table is a
    _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT), or a
    numpy array. True indicates HPT format, False indicates numpy array.
  m: The total number of agents in the population.
  r: Rogue strategy r.
  s: Population strategy s.
  alpha: Fermi distribution temperature parameter.
  game_is_constant_sum: Boolean indicating if the game is constant sum.
  use_local_selection_model: Enable local evolutionary selection model, which
    considers fitness against the current opponent only, rather than the
    global population state.
  payoff_sum: The payoff sum if the game is constant sum, or None otherwise.

Returns:
  The fixation probability.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00114">114</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  122</span>                payoff_sum=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  123</span>  <span class="stringliteral">&quot;&quot;&quot;Gets fixation probability of rogue strategy r in population playing s.</span></div>
<div class="line"><span class="lineno">  124</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  125</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  126</span><span class="stringliteral">    payoff_table: A payoff table.</span></div>
<div class="line"><span class="lineno">  127</span><span class="stringliteral">    payoffs_are_hpt_format: Boolean indicating whether payoff_table is a</span></div>
<div class="line"><span class="lineno">  128</span><span class="stringliteral">      _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT), or a</span></div>
<div class="line"><span class="lineno">  129</span><span class="stringliteral">      numpy array. True indicates HPT format, False indicates numpy array.</span></div>
<div class="line"><span class="lineno">  130</span><span class="stringliteral">    m: The total number of agents in the population.</span></div>
<div class="line"><span class="lineno">  131</span><span class="stringliteral">    r: Rogue strategy r.</span></div>
<div class="line"><span class="lineno">  132</span><span class="stringliteral">    s: Population strategy s.</span></div>
<div class="line"><span class="lineno">  133</span><span class="stringliteral">    alpha: Fermi distribution temperature parameter.</span></div>
<div class="line"><span class="lineno">  134</span><span class="stringliteral">    game_is_constant_sum: Boolean indicating if the game is constant sum.</span></div>
<div class="line"><span class="lineno">  135</span><span class="stringliteral">    use_local_selection_model: Enable local evolutionary selection model, which</span></div>
<div class="line"><span class="lineno">  136</span><span class="stringliteral">      considers fitness against the current opponent only, rather than the</span></div>
<div class="line"><span class="lineno">  137</span><span class="stringliteral">      global population state.</span></div>
<div class="line"><span class="lineno">  138</span><span class="stringliteral">    payoff_sum: The payoff sum if the game is constant sum, or None otherwise.</span></div>
<div class="line"><span class="lineno">  139</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  140</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  141</span><span class="stringliteral">    The fixation probability.</span></div>
<div class="line"><span class="lineno">  142</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  143</span> </div>
<div class="line"><span class="lineno">  144</span>  <span class="keywordflow">if</span> use_local_selection_model <span class="keywordflow">or</span> game_is_constant_sum:</div>
<div class="line"><span class="lineno">  145</span>    payoff_rs = _get_payoff(</div>
<div class="line"><span class="lineno">  146</span>        payoff_table, payoffs_are_hpt_format, strat_profile=[r, s], k=0)</div>
<div class="line"><span class="lineno">  147</span>    <span class="keywordflow">if</span> use_local_selection_model:</div>
<div class="line"><span class="lineno">  148</span>      <span class="comment"># Row plays s, column plays r</span></div>
<div class="line"><span class="lineno">  149</span>      payoff_sr = _get_payoff(</div>
<div class="line"><span class="lineno">  150</span>          payoff_table, payoffs_are_hpt_format, strat_profile=[s, r], k=0)</div>
<div class="line"><span class="lineno">  151</span>      u = alpha * (payoff_rs - payoff_sr)</div>
<div class="line"><span class="lineno">  152</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  153</span>      <span class="keyword">assert</span> payoff_sum <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  154</span>      u = alpha * m / (m - 1) * (payoff_rs - payoff_sum / 2)</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">if</span> np.isclose(u, 0, atol=1e-14):</div>
<div class="line"><span class="lineno">  157</span>      <span class="comment"># To avoid divide by 0, use first-order approximation when u is near 0</span></div>
<div class="line"><span class="lineno">  158</span>      result = 1 / m</div>
<div class="line"><span class="lineno">  159</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  160</span>      result = (1 - np.exp(-u)) / (1 - np.exp(-m * u))</div>
<div class="line"><span class="lineno">  161</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  162</span>    <span class="keyword">assert</span> payoff_sum <span class="keywordflow">is</span> <span class="keywordtype">None</span></div>
<div class="line"><span class="lineno">  163</span>    summed = 0</div>
<div class="line"><span class="lineno">  164</span>    <span class="keywordflow">for</span> l <span class="keywordflow">in</span> range(1, m):</div>
<div class="line"><span class="lineno">  165</span>      t_mult = 1.</div>
<div class="line"><span class="lineno">  166</span>      <span class="keywordflow">for</span> p_r <span class="keywordflow">in</span> range(1, l + 1):</div>
<div class="line"><span class="lineno">  167</span>        <span class="comment"># Probabilities of strategy r decreasing/increasing</span></div>
<div class="line"><span class="lineno">  168</span>        p_s = m - p_r</div>
<div class="line"><span class="lineno">  169</span>        <span class="comment"># Fitness of agent playing r against rest of current population</span></div>
<div class="line"><span class="lineno">  170</span>        f_ri = _get_singlepop_2player_fitness(</div>
<div class="line"><span class="lineno">  171</span>            payoff_table,</div>
<div class="line"><span class="lineno">  172</span>            payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  173</span>            m,</div>
<div class="line"><span class="lineno">  174</span>            my_popsize=p_r,</div>
<div class="line"><span class="lineno">  175</span>            my_strat=r,</div>
<div class="line"><span class="lineno">  176</span>            opponent_strat=s,</div>
<div class="line"><span class="lineno">  177</span>            use_local_selection_model=use_local_selection_model)</div>
<div class="line"><span class="lineno">  178</span>        <span class="comment"># Fitness of agent playing s against rest of current population</span></div>
<div class="line"><span class="lineno">  179</span>        f_sj = _get_singlepop_2player_fitness(</div>
<div class="line"><span class="lineno">  180</span>            payoff_table,</div>
<div class="line"><span class="lineno">  181</span>            payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  182</span>            m,</div>
<div class="line"><span class="lineno">  183</span>            my_popsize=p_s,</div>
<div class="line"><span class="lineno">  184</span>            my_strat=s,</div>
<div class="line"><span class="lineno">  185</span>            opponent_strat=r,</div>
<div class="line"><span class="lineno">  186</span>            use_local_selection_model=use_local_selection_model)</div>
<div class="line"><span class="lineno">  187</span>        t_mult *= np.exp(-alpha * (f_ri - f_sj))</div>
<div class="line"><span class="lineno">  188</span>      summed += t_mult</div>
<div class="line"><span class="lineno">  189</span>    result = (1 + summed)**(-1)</div>
<div class="line"><span class="lineno">  190</span>  <span class="keywordflow">return</span> result</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00033">open_spiel.python.egt.alpharank._get_payoff()</a>, and <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00077">open_spiel.python.egt.alpharank._get_singlepop_2player_fitness()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00259">open_spiel.python.egt.alpharank._get_singlepop_transition_matrix()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a4169e78268b52116fc103a4cf12a71e2_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a4169e78268b52116fc103a4cf12a71e2_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a4169e78268b52116fc103a4cf12a71e2_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a4169e78268b52116fc103a4cf12a71e2_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,218,46"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="526,5,738,46"/>
<area shape="poly" title=" " alt="" coords="218,20,266,19,478,19,511,20,511,25,478,24,266,24,218,25"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a1bb78a35650319fd3c53b1f65f3fb259" title=" " alt="" coords="266,33,478,74"/>
<area shape="poly" title=" " alt="" coords="218,34,250,38,250,43,218,40"/>
<area shape="poly" title=" " alt="" coords="478,40,510,36,511,41,479,45"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a4169e78268b52116fc103a4cf12a71e2_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a4169e78268b52116fc103a4cf12a71e2_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a4169e78268b52116fc103a4cf12a71e2_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a4169e78268b52116fc103a4cf12a71e2_icgraph">
<area shape="rect" title=" " alt="" coords="886,71,1099,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#abd2b94bd383d0984100561a0acb09d86" title=" " alt="" coords="626,71,838,111"/>
<area shape="poly" title=" " alt="" coords="871,94,839,94,839,88,871,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,78,578,104"/>
<area shape="poly" title=" " alt="" coords="610,94,578,94,578,88,610,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,5,268,46"/>
<area shape="poly" title=" " alt="" coords="367,77,236,49,237,44,368,72"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,71,262,111"/>
<area shape="poly" title=" " alt="" coords="300,94,262,94,262,88,300,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,136,262,177"/>
<area shape="poly" title=" " alt="" coords="368,110,237,138,236,133,367,105"/>
</map>
</div>

</div>
</div>
<a id="a44fe0f038fc5d39f276ed19dfc1aa353" name="a44fe0f038fc5d39f276ed19dfc1aa353"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44fe0f038fc5d39f276ed19dfc1aa353">&#9670;&#160;</a></span>_get_rho_sr_multipop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank._get_rho_sr_multipop </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_table_k</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoffs_are_hpt_format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>k</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>r</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>s</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alpha</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_fast_compute</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Gets fixation probability for multi-population games.

Specifically, considers the fitnesses of two strategy profiles r and s given
the payoff table of the k-th population. Profile s is the current profile and
r is a mutant profile. Profiles r and s are identical except for the k-th
element, which corresponds to the deviation of the k-th population's
monomorphic strategy from s[k] to r[k].

Args:
  payoff_table_k: The k-th population's payoff table.
  payoffs_are_hpt_format: Boolean indicating whether payoff_table_k is a
    _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT), or numpy
    array. True indicates HPT format, False indicates numpy array.
  k: Index of the k-th population.
  m: Total number of agents in the k-th population.
  r: Strategy profile containing mutant strategy r for population k.
  s: Current strategy profile.
  alpha: Fermi distribution temperature parameter.
  use_fast_compute: Boolean indicating whether closed-form computation should
    be used.

Returns:
  Probability of strategy r fixating in population k.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00193">193</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  200</span>                         use_fast_compute=<span class="keyword">True</span>):</div>
<div class="line"><span class="lineno">  201</span>  <span class="stringliteral">&quot;&quot;&quot;Gets fixation probability for multi-population games.</span></div>
<div class="line"><span class="lineno">  202</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  203</span><span class="stringliteral">  Specifically, considers the fitnesses of two strategy profiles r and s given</span></div>
<div class="line"><span class="lineno">  204</span><span class="stringliteral">  the payoff table of the k-th population. Profile s is the current profile and</span></div>
<div class="line"><span class="lineno">  205</span><span class="stringliteral">  r is a mutant profile. Profiles r and s are identical except for the k-th</span></div>
<div class="line"><span class="lineno">  206</span><span class="stringliteral">  element, which corresponds to the deviation of the k-th population&#39;s</span></div>
<div class="line"><span class="lineno">  207</span><span class="stringliteral">  monomorphic strategy from s[k] to r[k].</span></div>
<div class="line"><span class="lineno">  208</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  209</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  210</span><span class="stringliteral">    payoff_table_k: The k-th population&#39;s payoff table.</span></div>
<div class="line"><span class="lineno">  211</span><span class="stringliteral">    payoffs_are_hpt_format: Boolean indicating whether payoff_table_k is a</span></div>
<div class="line"><span class="lineno">  212</span><span class="stringliteral">      _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT), or numpy</span></div>
<div class="line"><span class="lineno">  213</span><span class="stringliteral">      array. True indicates HPT format, False indicates numpy array.</span></div>
<div class="line"><span class="lineno">  214</span><span class="stringliteral">    k: Index of the k-th population.</span></div>
<div class="line"><span class="lineno">  215</span><span class="stringliteral">    m: Total number of agents in the k-th population.</span></div>
<div class="line"><span class="lineno">  216</span><span class="stringliteral">    r: Strategy profile containing mutant strategy r for population k.</span></div>
<div class="line"><span class="lineno">  217</span><span class="stringliteral">    s: Current strategy profile.</span></div>
<div class="line"><span class="lineno">  218</span><span class="stringliteral">    alpha: Fermi distribution temperature parameter.</span></div>
<div class="line"><span class="lineno">  219</span><span class="stringliteral">    use_fast_compute: Boolean indicating whether closed-form computation should</span></div>
<div class="line"><span class="lineno">  220</span><span class="stringliteral">      be used.</span></div>
<div class="line"><span class="lineno">  221</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  222</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  223</span><span class="stringliteral">    Probability of strategy r fixating in population k.</span></div>
<div class="line"><span class="lineno">  224</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  225</span>  <span class="comment"># Fitnesses are not dependent on population sizes for multipopulation case, so</span></div>
<div class="line"><span class="lineno">  226</span>  <span class="comment"># can be computed outside the loops</span></div>
<div class="line"><span class="lineno">  227</span>  <span class="comment"># Fitness of population k agent given strategy profile r</span></div>
<div class="line"><span class="lineno">  228</span>  f_r = _get_payoff(payoff_table_k, payoffs_are_hpt_format, r, k)</div>
<div class="line"><span class="lineno">  229</span>  <span class="comment"># Fitness of population k agent given strategy profile s</span></div>
<div class="line"><span class="lineno">  230</span>  f_s = _get_payoff(payoff_table_k, payoffs_are_hpt_format, s, k)</div>
<div class="line"><span class="lineno">  231</span> </div>
<div class="line"><span class="lineno">  232</span>  <span class="keywordflow">if</span> use_fast_compute:</div>
<div class="line"><span class="lineno">  233</span>    u = alpha * (f_r - f_s)</div>
<div class="line"><span class="lineno">  234</span>    <span class="keywordflow">if</span> np.isclose(u, 0, atol=1e-14):</div>
<div class="line"><span class="lineno">  235</span>      <span class="comment"># To avoid divide by 0, use first-order approximation when u is near 0</span></div>
<div class="line"><span class="lineno">  236</span>      result = 1 / m</div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  238</span>      result = (1 - np.exp(-u)) / (1 - np.exp(-m * u))</div>
<div class="line"><span class="lineno">  239</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  240</span>    summed = 0</div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">for</span> l <span class="keywordflow">in</span> range(1, m):</div>
<div class="line"><span class="lineno">  242</span>      t_mult = 1.</div>
<div class="line"><span class="lineno">  243</span>      <span class="keywordflow">for</span> p_r <span class="keywordflow">in</span> range(1, l + 1):  <span class="comment"># pylint: disable= unused-variable</span></div>
<div class="line"><span class="lineno">  244</span>        t_mult *= np.exp(-alpha * (f_r - f_s))</div>
<div class="line"><span class="lineno">  245</span>      summed += t_mult</div>
<div class="line"><span class="lineno">  246</span>    result = (1 + summed)**(-1)</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>  <span class="keywordflow">return</span> result</div>
<div class="line"><span class="lineno">  249</span> </div>
<div class="line"><span class="lineno">  250</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00033">open_spiel.python.egt.alpharank._get_payoff()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00327">open_spiel.python.egt.alpharank._get_multipop_transition_matrix()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a44fe0f038fc5d39f276ed19dfc1aa353_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a44fe0f038fc5d39f276ed19dfc1aa353_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a44fe0f038fc5d39f276ed19dfc1aa353_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a44fe0f038fc5d39f276ed19dfc1aa353_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,218,46"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="266,5,478,46"/>
<area shape="poly" title=" " alt="" coords="218,23,250,23,250,28,218,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a44fe0f038fc5d39f276ed19dfc1aa353_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a44fe0f038fc5d39f276ed19dfc1aa353_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a44fe0f038fc5d39f276ed19dfc1aa353_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a44fe0f038fc5d39f276ed19dfc1aa353_icgraph">
<area shape="rect" title=" " alt="" coords="886,71,1099,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a95a5a8272beefadfcb7248a45cdf1729" title=" " alt="" coords="626,71,838,111"/>
<area shape="poly" title=" " alt="" coords="871,94,839,94,839,88,871,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,78,578,104"/>
<area shape="poly" title=" " alt="" coords="610,94,578,94,578,88,610,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,5,268,46"/>
<area shape="poly" title=" " alt="" coords="367,77,236,49,237,44,368,72"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,71,262,111"/>
<area shape="poly" title=" " alt="" coords="300,94,262,94,262,88,300,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,136,262,177"/>
<area shape="poly" title=" " alt="" coords="368,110,237,138,236,133,367,105"/>
</map>
</div>

</div>
</div>
<a id="a1bb78a35650319fd3c53b1f65f3fb259" name="a1bb78a35650319fd3c53b1f65f3fb259"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bb78a35650319fd3c53b1f65f3fb259">&#9670;&#160;</a></span>_get_singlepop_2player_fitness()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank._get_singlepop_2player_fitness </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_table</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoffs_are_hpt_format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>my_popsize</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>my_strat</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>opponent_strat</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_local_selection_model</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Gets a target agent fitness given a finite population of competitors.

Note that this is only applicable to 2-player symmetric games.
Namely, gets fitness of an agent i playing my_strat in underlying population
of (my_popsize agents playing my_strat) and (m-my_popsize agents playing
opponent_strat).

Args:
  payoff_table: A payoff table.
  payoffs_are_hpt_format: Boolean indicating whether payoff_table is a
    _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT), or a
    numpy array. True indicates HPT format, False indicates numpy array.
  m: The total number of agents in the population.
  my_popsize: The number of agents in the population playing my strategy.
  my_strat: Index of my strategy.
  opponent_strat: Index of the opposing strategy.
  use_local_selection_model: Enable local evolutionary selection model, which
    considers fitness against the current opponent only, rather than the
    global population state.

Returns:
  The fitness of agent i.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00075">75</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   77</span>                                   use_local_selection_model):</div>
<div class="line"><span class="lineno">   78</span>  <span class="stringliteral">&quot;&quot;&quot;Gets a target agent fitness given a finite population of competitors.</span></div>
<div class="line"><span class="lineno">   79</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   80</span><span class="stringliteral">  Note that this is only applicable to 2-player symmetric games.</span></div>
<div class="line"><span class="lineno">   81</span><span class="stringliteral">  Namely, gets fitness of an agent i playing my_strat in underlying population</span></div>
<div class="line"><span class="lineno">   82</span><span class="stringliteral">  of (my_popsize agents playing my_strat) and (m-my_popsize agents playing</span></div>
<div class="line"><span class="lineno">   83</span><span class="stringliteral">  opponent_strat).</span></div>
<div class="line"><span class="lineno">   84</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   85</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">   86</span><span class="stringliteral">    payoff_table: A payoff table.</span></div>
<div class="line"><span class="lineno">   87</span><span class="stringliteral">    payoffs_are_hpt_format: Boolean indicating whether payoff_table is a</span></div>
<div class="line"><span class="lineno">   88</span><span class="stringliteral">      _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT), or a</span></div>
<div class="line"><span class="lineno">   89</span><span class="stringliteral">      numpy array. True indicates HPT format, False indicates numpy array.</span></div>
<div class="line"><span class="lineno">   90</span><span class="stringliteral">    m: The total number of agents in the population.</span></div>
<div class="line"><span class="lineno">   91</span><span class="stringliteral">    my_popsize: The number of agents in the population playing my strategy.</span></div>
<div class="line"><span class="lineno">   92</span><span class="stringliteral">    my_strat: Index of my strategy.</span></div>
<div class="line"><span class="lineno">   93</span><span class="stringliteral">    opponent_strat: Index of the opposing strategy.</span></div>
<div class="line"><span class="lineno">   94</span><span class="stringliteral">    use_local_selection_model: Enable local evolutionary selection model, which</span></div>
<div class="line"><span class="lineno">   95</span><span class="stringliteral">      considers fitness against the current opponent only, rather than the</span></div>
<div class="line"><span class="lineno">   96</span><span class="stringliteral">      global population state.</span></div>
<div class="line"><span class="lineno">   97</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">   98</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">   99</span><span class="stringliteral">    The fitness of agent i.</span></div>
<div class="line"><span class="lineno">  100</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>  <span class="keywordflow">if</span> use_local_selection_model:</div>
<div class="line"><span class="lineno">  103</span>    fitness = payoff_table[tuple([my_strat, opponent_strat])]</div>
<div class="line"><span class="lineno">  104</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  105</span>    fitness = ((my_popsize-1)/(m-1)*</div>
<div class="line"><span class="lineno">  106</span>               _get_payoff(payoff_table, payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  107</span>                           strat_profile=[my_strat, my_strat], k=0) +</div>
<div class="line"><span class="lineno">  108</span>               (m-my_popsize)/(m-1)*</div>
<div class="line"><span class="lineno">  109</span>               _get_payoff(payoff_table, payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  110</span>                           strat_profile=[my_strat, opponent_strat], k=0))</div>
<div class="line"><span class="lineno">  111</span>  <span class="keywordflow">return</span> fitness</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00033">open_spiel.python.egt.alpharank._get_payoff()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00122">open_spiel.python.egt.alpharank._get_rho_sr()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a1bb78a35650319fd3c53b1f65f3fb259_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a1bb78a35650319fd3c53b1f65f3fb259_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a1bb78a35650319fd3c53b1f65f3fb259_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a1bb78a35650319fd3c53b1f65f3fb259_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,218,46"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="266,5,478,46"/>
<area shape="poly" title=" " alt="" coords="218,23,250,23,250,28,218,28"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a1bb78a35650319fd3c53b1f65f3fb259_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a1bb78a35650319fd3c53b1f65f3fb259_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a1bb78a35650319fd3c53b1f65f3fb259_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a1bb78a35650319fd3c53b1f65f3fb259_icgraph">
<area shape="rect" title=" " alt="" coords="1147,71,1359,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a4169e78268b52116fc103a4cf12a71e2" title=" " alt="" coords="886,71,1099,111"/>
<area shape="poly" title=" " alt="" coords="1131,94,1099,94,1099,88,1131,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#abd2b94bd383d0984100561a0acb09d86" title=" " alt="" coords="626,71,838,111"/>
<area shape="poly" title=" " alt="" coords="871,94,839,94,839,88,871,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,78,578,104"/>
<area shape="poly" title=" " alt="" coords="610,94,578,94,578,88,610,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,5,268,46"/>
<area shape="poly" title=" " alt="" coords="367,77,236,49,237,44,368,72"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,71,262,111"/>
<area shape="poly" title=" " alt="" coords="300,94,262,94,262,88,300,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,136,262,177"/>
<area shape="poly" title=" " alt="" coords="368,110,237,138,236,133,367,105"/>
</map>
</div>

</div>
</div>
<a id="abd2b94bd383d0984100561a0acb09d86" name="abd2b94bd383d0984100561a0acb09d86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd2b94bd383d0984100561a0acb09d86">&#9670;&#160;</a></span>_get_singlepop_transition_matrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank._get_singlepop_transition_matrix </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_table</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoffs_are_hpt_format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>m</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alpha</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>game_is_constant_sum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_local_selection_model</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_sum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_inf_alpha</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>inf_alpha_eps</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0.1</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Gets the Markov transition matrix for a single-population game.

Args:
  payoff_table: A payoff table.
  payoffs_are_hpt_format: Boolean indicating whether payoff_table is a
    _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT), or a
    numpy array. True indicates HPT format, False indicates numpy array.
  m: Total number of agents in the k-th population.
  alpha: Fermi distribution temperature parameter.
  game_is_constant_sum: Boolean indicating if the game is constant sum.
  use_local_selection_model: Enable local evolutionary selection model, which
    considers fitness against the current opponent only, rather than the
    global population state.
  payoff_sum: The payoff sum if the game is constant sum, or None otherwise.
  use_inf_alpha: Use infinite-alpha alpharank model.
  inf_alpha_eps: Noise term (epsilon) used in infinite-alpha alpharank model.

Returns:
  Markov transition matrix.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00251">251</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  259</span>                                     inf_alpha_eps=0.1):</div>
<div class="line"><span class="lineno">  260</span>  <span class="stringliteral">&quot;&quot;&quot;Gets the Markov transition matrix for a single-population game.</span></div>
<div class="line"><span class="lineno">  261</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  262</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  263</span><span class="stringliteral">    payoff_table: A payoff table.</span></div>
<div class="line"><span class="lineno">  264</span><span class="stringliteral">    payoffs_are_hpt_format: Boolean indicating whether payoff_table is a</span></div>
<div class="line"><span class="lineno">  265</span><span class="stringliteral">      _PayoffTableInterface object (AKA Heuristic Payoff Table or HPT), or a</span></div>
<div class="line"><span class="lineno">  266</span><span class="stringliteral">      numpy array. True indicates HPT format, False indicates numpy array.</span></div>
<div class="line"><span class="lineno">  267</span><span class="stringliteral">    m: Total number of agents in the k-th population.</span></div>
<div class="line"><span class="lineno">  268</span><span class="stringliteral">    alpha: Fermi distribution temperature parameter.</span></div>
<div class="line"><span class="lineno">  269</span><span class="stringliteral">    game_is_constant_sum: Boolean indicating if the game is constant sum.</span></div>
<div class="line"><span class="lineno">  270</span><span class="stringliteral">    use_local_selection_model: Enable local evolutionary selection model, which</span></div>
<div class="line"><span class="lineno">  271</span><span class="stringliteral">      considers fitness against the current opponent only, rather than the</span></div>
<div class="line"><span class="lineno">  272</span><span class="stringliteral">      global population state.</span></div>
<div class="line"><span class="lineno">  273</span><span class="stringliteral">    payoff_sum: The payoff sum if the game is constant sum, or None otherwise.</span></div>
<div class="line"><span class="lineno">  274</span><span class="stringliteral">    use_inf_alpha: Use infinite-alpha alpharank model.</span></div>
<div class="line"><span class="lineno">  275</span><span class="stringliteral">    inf_alpha_eps: Noise term (epsilon) used in infinite-alpha alpharank model.</span></div>
<div class="line"><span class="lineno">  276</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  277</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  278</span><span class="stringliteral">    Markov transition matrix.</span></div>
<div class="line"><span class="lineno">  279</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  280</span> </div>
<div class="line"><span class="lineno">  281</span>  num_strats_per_population = utils.get_num_strats_per_population(</div>
<div class="line"><span class="lineno">  282</span>      [payoff_table], payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  283</span>  num_strats = num_strats_per_population[0]</div>
<div class="line"><span class="lineno">  284</span> </div>
<div class="line"><span class="lineno">  285</span>  c = np.zeros((num_strats, num_strats))</div>
<div class="line"><span class="lineno">  286</span>  rhos = np.zeros((num_strats, num_strats))</div>
<div class="line"><span class="lineno">  287</span> </div>
<div class="line"><span class="lineno">  288</span>  <span class="comment"># r and s are, respectively, the column and row strategy profiles</span></div>
<div class="line"><span class="lineno">  289</span>  <span class="keywordflow">for</span> s <span class="keywordflow">in</span> range(num_strats):  <span class="comment"># Current strategy</span></div>
<div class="line"><span class="lineno">  290</span>    <span class="keywordflow">for</span> r <span class="keywordflow">in</span> range(num_strats):  <span class="comment"># Next strategy</span></div>
<div class="line"><span class="lineno">  291</span>      <span class="keywordflow">if</span> s != r:  <span class="comment"># Compute off-diagonal fixation probabilities</span></div>
<div class="line"><span class="lineno">  292</span>        <span class="keywordflow">if</span> use_inf_alpha:</div>
<div class="line"><span class="lineno">  293</span>          eta = 1. / (num_strats - 1)</div>
<div class="line"><span class="lineno">  294</span>          <span class="comment"># Payoff of r when played against s</span></div>
<div class="line"><span class="lineno">  295</span>          payoff_rs = _get_payoff(</div>
<div class="line"><span class="lineno">  296</span>              payoff_table, payoffs_are_hpt_format, strat_profile=[r, s], k=0)</div>
<div class="line"><span class="lineno">  297</span>          <span class="comment"># Payoff of s when played against r</span></div>
<div class="line"><span class="lineno">  298</span>          payoff_sr = _get_payoff(</div>
<div class="line"><span class="lineno">  299</span>              payoff_table, payoffs_are_hpt_format, strat_profile=[s, r], k=0)</div>
<div class="line"><span class="lineno">  300</span>          <span class="keywordflow">if</span> np.isclose(payoff_rs, payoff_sr, atol=1e-14):</div>
<div class="line"><span class="lineno">  301</span>            c[s, r] = eta * 0.5</div>
<div class="line"><span class="lineno">  302</span>          <span class="keywordflow">elif</span> payoff_rs &gt; payoff_sr:</div>
<div class="line"><span class="lineno">  303</span>            <span class="comment"># Transition to r since its payoff is higher than s, but remove some</span></div>
<div class="line"><span class="lineno">  304</span>            <span class="comment"># small amount of mass, inf_alpha_eps, to keep the chain irreducible</span></div>
<div class="line"><span class="lineno">  305</span>            c[s, r] = eta * (1 - inf_alpha_eps)</div>
<div class="line"><span class="lineno">  306</span>          <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  307</span>            <span class="comment"># Transition with very small probability</span></div>
<div class="line"><span class="lineno">  308</span>            c[s, r] = eta * inf_alpha_eps</div>
<div class="line"><span class="lineno">  309</span>        <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  310</span>          rhos[s, r] = _get_rho_sr(payoff_table, payoffs_are_hpt_format, m, r,</div>
<div class="line"><span class="lineno">  311</span>                                   s, alpha, game_is_constant_sum,</div>
<div class="line"><span class="lineno">  312</span>                                   use_local_selection_model, payoff_sum)</div>
<div class="line"><span class="lineno">  313</span>          eta = 1. / (num_strats - 1)</div>
<div class="line"><span class="lineno">  314</span>          c[s, r] = eta * rhos[s, r]</div>
<div class="line"><span class="lineno">  315</span>    <span class="comment"># Fixation probability of competing only against one&#39;s own strategy is 1</span></div>
<div class="line"><span class="lineno">  316</span>    <span class="comment"># rhos[s,s] = 1. # Commented as self-fixations are not interesting (for now)</span></div>
<div class="line"><span class="lineno">  317</span>    c[s, s] = 1 - sum(c[s, :])  <span class="comment"># Diagonals</span></div>
<div class="line"><span class="lineno">  318</span> </div>
<div class="line"><span class="lineno">  319</span>  <span class="keywordflow">return</span> c, rhos</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00033">open_spiel.python.egt.alpharank._get_payoff()</a>, and <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00122">open_spiel.python.egt.alpharank._get_rho_sr()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00712">open_spiel.python.egt.alpharank.compute()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_abd2b94bd383d0984100561a0acb09d86_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_abd2b94bd383d0984100561a0acb09d86_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_abd2b94bd383d0984100561a0acb09d86_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_abd2b94bd383d0984100561a0acb09d86_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,218,46"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="786,27,999,67"/>
<area shape="poly" title=" " alt="" coords="218,20,266,19,502,18,739,30,771,32,771,38,738,35,502,23,266,24,218,25"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a4169e78268b52116fc103a4cf12a71e2" title=" " alt="" coords="266,33,478,74"/>
<area shape="poly" title=" " alt="" coords="218,34,250,38,250,43,218,40"/>
<area shape="poly" title=" " alt="" coords="479,50,771,46,771,51,479,55"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a1bb78a35650319fd3c53b1f65f3fb259" title=" " alt="" coords="526,84,738,125"/>
<area shape="poly" title=" " alt="" coords="479,72,511,78,510,83,478,77"/>
<area shape="poly" title=" " alt="" coords="727,81,782,69,783,74,728,86"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_abd2b94bd383d0984100561a0acb09d86_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_abd2b94bd383d0984100561a0acb09d86_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_abd2b94bd383d0984100561a0acb09d86_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_abd2b94bd383d0984100561a0acb09d86_icgraph">
<area shape="rect" title=" " alt="" coords="626,71,838,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,78,578,104"/>
<area shape="poly" title=" " alt="" coords="610,94,578,94,578,88,610,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,5,268,46"/>
<area shape="poly" title=" " alt="" coords="367,77,236,49,237,44,368,72"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,71,262,111"/>
<area shape="poly" title=" " alt="" coords="300,94,262,94,262,88,300,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,136,262,177"/>
<area shape="poly" title=" " alt="" coords="368,110,237,138,236,133,367,105"/>
</map>
</div>

</div>
</div>
<a id="ade5c830cc6602388790d1c7dfb9ee2ec" name="ade5c830cc6602388790d1c7dfb9ee2ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade5c830cc6602388790d1c7dfb9ee2ec">&#9670;&#160;</a></span>_get_stationary_distr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank._get_stationary_distr </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>c</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<pre class="fragment">Gets stationary distribution of transition matrix c.</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00387">387</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  387</span><span class="keyword">def </span>_get_stationary_distr(c):</div>
<div class="line"><span class="lineno">  388</span>  <span class="stringliteral">&quot;&quot;&quot;Gets stationary distribution of transition matrix c.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  389</span> </div>
<div class="line"><span class="lineno">  390</span>  eigenvals, left_eigenvecs, _ = la.eig(c, left=<span class="keyword">True</span>, right=<span class="keyword">True</span>)</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>  mask = abs(eigenvals - 1.) &lt; 1e-10</div>
<div class="line"><span class="lineno">  393</span>  left_eigenvecs = left_eigenvecs[:, mask]</div>
<div class="line"><span class="lineno">  394</span>  num_stationary_eigenvecs = np.shape(left_eigenvecs)[1]</div>
<div class="line"><span class="lineno">  395</span>  <span class="keywordflow">if</span> num_stationary_eigenvecs != 1:</div>
<div class="line"><span class="lineno">  396</span>    <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&#39;Expected 1 stationary distribution, but found %d&#39;</span> %</div>
<div class="line"><span class="lineno">  397</span>                     num_stationary_eigenvecs)</div>
<div class="line"><span class="lineno">  398</span>  left_eigenvecs *= 1. / sum(left_eigenvecs)</div>
<div class="line"><span class="lineno">  399</span> </div>
<div class="line"><span class="lineno">  400</span>  <span class="keywordflow">return</span> left_eigenvecs.real.flatten()</div>
<div class="line"><span class="lineno">  401</span> </div>
<div class="line"><span class="lineno">  402</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00712">open_spiel.python.egt.alpharank.compute()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_ade5c830cc6602388790d1c7dfb9ee2ec_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_ade5c830cc6602388790d1c7dfb9ee2ec_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_ade5c830cc6602388790d1c7dfb9ee2ec_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_ade5c830cc6602388790d1c7dfb9ee2ec_icgraph">
<area shape="rect" title=" " alt="" coords="626,71,838,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,78,578,104"/>
<area shape="poly" title=" " alt="" coords="610,94,578,94,578,88,610,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,5,268,46"/>
<area shape="poly" title=" " alt="" coords="367,77,236,49,237,44,368,72"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,71,262,111"/>
<area shape="poly" title=" " alt="" coords="300,94,262,94,262,88,300,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,136,262,177"/>
<area shape="poly" title=" " alt="" coords="368,110,237,138,236,133,367,105"/>
</map>
</div>

</div>
</div>
<a id="a3dad027ee92dd7238a80b03984d98f52" name="a3dad027ee92dd7238a80b03984d98f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dad027ee92dd7238a80b03984d98f52">&#9670;&#160;</a></span>compute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank.compute </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_tables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>m</em></span><span class="paramdefsep"> = </span><span class="paramdefval">50</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alpha</em></span><span class="paramdefsep"> = </span><span class="paramdefval">100</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_local_selection_model</em></span><span class="paramdefsep"> = </span><span class="paramdefval">True</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>verbose</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>use_inf_alpha</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>inf_alpha_eps</em></span><span class="paramdefsep"> = </span><span class="paramdefval">0.01</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes the finite population stationary statistics.

Args:
  payoff_tables: List of game payoff tables, one for each agent identity. Each
    payoff_table may be either a numpy array, or a _PayoffTableInterface
    object.
  m: Finite population size.
  alpha: Fermi distribution temperature parameter.
  use_local_selection_model: Enable local evolutionary selection model, which
    considers fitness against the current opponent only, rather than the
    global population state.
  verbose: Set to True to print intermediate results.
  use_inf_alpha: Use infinite-alpha alpharank model.
  inf_alpha_eps: Noise term to use in infinite-alpha alpharank model.

Returns:
  rhos: Matrix of strategy-to-strategy fixation probabilities.
  rho_m: Neutral fixation probability.
  pi: Finite population stationary distribution.
  num_strats: Number of available strategies.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00706">706</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  712</span>            inf_alpha_eps=0.01):</div>
<div class="line"><span class="lineno">  713</span>  <span class="stringliteral">&quot;&quot;&quot;Computes the finite population stationary statistics.</span></div>
<div class="line"><span class="lineno">  714</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  715</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  716</span><span class="stringliteral">    payoff_tables: List of game payoff tables, one for each agent identity. Each</span></div>
<div class="line"><span class="lineno">  717</span><span class="stringliteral">      payoff_table may be either a numpy array, or a _PayoffTableInterface</span></div>
<div class="line"><span class="lineno">  718</span><span class="stringliteral">      object.</span></div>
<div class="line"><span class="lineno">  719</span><span class="stringliteral">    m: Finite population size.</span></div>
<div class="line"><span class="lineno">  720</span><span class="stringliteral">    alpha: Fermi distribution temperature parameter.</span></div>
<div class="line"><span class="lineno">  721</span><span class="stringliteral">    use_local_selection_model: Enable local evolutionary selection model, which</span></div>
<div class="line"><span class="lineno">  722</span><span class="stringliteral">      considers fitness against the current opponent only, rather than the</span></div>
<div class="line"><span class="lineno">  723</span><span class="stringliteral">      global population state.</span></div>
<div class="line"><span class="lineno">  724</span><span class="stringliteral">    verbose: Set to True to print intermediate results.</span></div>
<div class="line"><span class="lineno">  725</span><span class="stringliteral">    use_inf_alpha: Use infinite-alpha alpharank model.</span></div>
<div class="line"><span class="lineno">  726</span><span class="stringliteral">    inf_alpha_eps: Noise term to use in infinite-alpha alpharank model.</span></div>
<div class="line"><span class="lineno">  727</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  728</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  729</span><span class="stringliteral">    rhos: Matrix of strategy-to-strategy fixation probabilities.</span></div>
<div class="line"><span class="lineno">  730</span><span class="stringliteral">    rho_m: Neutral fixation probability.</span></div>
<div class="line"><span class="lineno">  731</span><span class="stringliteral">    pi: Finite population stationary distribution.</span></div>
<div class="line"><span class="lineno">  732</span><span class="stringliteral">    num_strats: Number of available strategies.</span></div>
<div class="line"><span class="lineno">  733</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  734</span>  payoffs_are_hpt_format = utils.check_payoffs_are_hpt(payoff_tables)</div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>  num_populations = len(payoff_tables)</div>
<div class="line"><span class="lineno">  737</span> </div>
<div class="line"><span class="lineno">  738</span>  num_strats_per_population = utils.get_num_strats_per_population(</div>
<div class="line"><span class="lineno">  739</span>      payoff_tables, payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  740</span> </div>
<div class="line"><span class="lineno">  741</span>  <span class="comment"># Handles the trivial case of Markov chain with one state</span></div>
<div class="line"><span class="lineno">  742</span>  <span class="keywordflow">if</span> np.array_equal(num_strats_per_population,</div>
<div class="line"><span class="lineno">  743</span>                    np.ones(len(num_strats_per_population))):</div>
<div class="line"><span class="lineno">  744</span>    rhos = np.asarray([[1]])</div>
<div class="line"><span class="lineno">  745</span>    rho_m = 1. / m <span class="keywordflow">if</span> <span class="keywordflow">not</span> use_inf_alpha <span class="keywordflow">else</span> 1</div>
<div class="line"><span class="lineno">  746</span>    num_profiles = 1</div>
<div class="line"><span class="lineno">  747</span>    pi = np.asarray([1.])</div>
<div class="line"><span class="lineno">  748</span>    <span class="keywordflow">return</span> rhos, rho_m, pi, num_profiles, num_strats_per_population</div>
<div class="line"><span class="lineno">  749</span> </div>
<div class="line"><span class="lineno">  750</span>  <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">  751</span>    print(<span class="stringliteral">&#39;Constructing c matrix&#39;</span>)</div>
<div class="line"><span class="lineno">  752</span>    print(<span class="stringliteral">&#39;num_strats_per_population:&#39;</span>, num_strats_per_population)</div>
<div class="line"><span class="lineno">  753</span> </div>
<div class="line"><span class="lineno">  754</span>  <span class="keywordflow">if</span> num_populations == 1:</div>
<div class="line"><span class="lineno">  755</span>    <span class="comment"># User fast closed-form analysis for constant-sum single-population games</span></div>
<div class="line"><span class="lineno">  756</span>    game_is_constant_sum, payoff_sum = utils.check_is_constant_sum(</div>
<div class="line"><span class="lineno">  757</span>        payoff_tables[0], payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  758</span>    <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">  759</span>      print(<span class="stringliteral">&#39;game_is_constant_sum:&#39;</span>, game_is_constant_sum, <span class="stringliteral">&#39;payoff sum: &#39;</span>,</div>
<div class="line"><span class="lineno">  760</span>            payoff_sum)</div>
<div class="line"><span class="lineno">  761</span>    <span class="comment"># Single-population/symmetric game just uses the first player&#39;s payoffs</span></div>
<div class="line"><span class="lineno">  762</span>    c, rhos = _get_singlepop_transition_matrix(</div>
<div class="line"><span class="lineno">  763</span>        payoff_tables[0],</div>
<div class="line"><span class="lineno">  764</span>        payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  765</span>        m,</div>
<div class="line"><span class="lineno">  766</span>        alpha,</div>
<div class="line"><span class="lineno">  767</span>        game_is_constant_sum,</div>
<div class="line"><span class="lineno">  768</span>        use_local_selection_model,</div>
<div class="line"><span class="lineno">  769</span>        payoff_sum,</div>
<div class="line"><span class="lineno">  770</span>        use_inf_alpha=use_inf_alpha,</div>
<div class="line"><span class="lineno">  771</span>        inf_alpha_eps=inf_alpha_eps)</div>
<div class="line"><span class="lineno">  772</span>    num_profiles = num_strats_per_population[0]</div>
<div class="line"><span class="lineno">  773</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  774</span>    c, rhos = _get_multipop_transition_matrix(</div>
<div class="line"><span class="lineno">  775</span>        payoff_tables,</div>
<div class="line"><span class="lineno">  776</span>        payoffs_are_hpt_format,</div>
<div class="line"><span class="lineno">  777</span>        m,</div>
<div class="line"><span class="lineno">  778</span>        alpha,</div>
<div class="line"><span class="lineno">  779</span>        use_inf_alpha=use_inf_alpha,</div>
<div class="line"><span class="lineno">  780</span>        inf_alpha_eps=inf_alpha_eps)</div>
<div class="line"><span class="lineno">  781</span>    num_profiles = utils.get_num_profiles(num_strats_per_population)</div>
<div class="line"><span class="lineno">  782</span> </div>
<div class="line"><span class="lineno">  783</span>  pi = _get_stationary_distr(c)</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>  rho_m = 1. / m <span class="keywordflow">if</span> <span class="keywordflow">not</span> use_inf_alpha <span class="keywordflow">else</span> 1  <span class="comment"># Neutral fixation probability</span></div>
<div class="line"><span class="lineno">  786</span>  <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">  787</span>    print_results(payoff_tables, payoffs_are_hpt_format, rhos, rho_m, c, pi)</div>
<div class="line"><span class="lineno">  788</span> </div>
<div class="line"><span class="lineno">  789</span>  <span class="keywordflow">return</span> rhos, rho_m, pi, num_profiles, num_strats_per_population</div>
<div class="line"><span class="lineno">  790</span> </div>
<div class="line"><span class="lineno">  791</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00327">open_spiel.python.egt.alpharank._get_multipop_transition_matrix()</a>, <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00259">open_spiel.python.egt.alpharank._get_singlepop_transition_matrix()</a>, <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00387">open_spiel.python.egt.alpharank._get_stationary_distr()</a>, and <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00408">open_spiel.python.egt.alpharank.print_results()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00672">open_spiel.python.egt.alpharank.compute_and_report_alpharank()</a>, <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00568">open_spiel.python.egt.alpharank.sweep_pi_vs_alpha()</a>, and <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00437">open_spiel.python.egt.alpharank.sweep_pi_vs_epsilon()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a3dad027ee92dd7238a80b03984d98f52_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a3dad027ee92dd7238a80b03984d98f52_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a3dad027ee92dd7238a80b03984d98f52_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a3dad027ee92dd7238a80b03984d98f52_cgraph">
<area shape="rect" title=" " alt="" coords="5,129,268,155"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a95a5a8272beefadfcb7248a45cdf1729" title=" " alt="" coords="601,31,813,71"/>
<area shape="poly" title=" " alt="" coords="165,126,232,99,315,74,384,62,454,54,585,47,585,53,455,59,385,67,316,79,234,104,167,131"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#abd2b94bd383d0984100561a0acb09d86" title=" " alt="" coords="328,88,540,129"/>
<area shape="poly" title=" " alt="" coords="257,126,312,119,313,125,257,131"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ade5c830cc6602388790d1c7dfb9ee2ec" title=" " alt="" coords="328,153,540,194"/>
<area shape="poly" title=" " alt="" coords="262,153,313,158,312,163,262,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a119502729a184a8482674ea8df562537" title=" " alt="" coords="316,219,553,259"/>
<area shape="poly" title=" " alt="" coords="174,153,317,203,343,211,341,217,315,208,172,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="1122,88,1334,129"/>
<area shape="poly" title=" " alt="" coords="780,28,844,14,918,5,997,4,1036,9,1074,17,1107,28,1137,43,1190,76,1187,81,1135,48,1104,33,1073,22,1035,14,996,10,918,10,845,20,781,33"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a44fe0f038fc5d39f276ed19dfc1aa353" title=" " alt="" coords="861,31,1074,71"/>
<area shape="poly" title=" " alt="" coords="814,48,846,48,846,54,814,54"/>
<area shape="poly" title=" " alt="" coords="1064,69,1118,82,1117,87,1062,75"/>
<area shape="poly" title=" " alt="" coords="541,106,1106,106,1106,111,541,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a4169e78268b52116fc103a4cf12a71e2" title=" " alt="" coords="601,145,813,186"/>
<area shape="poly" title=" " alt="" coords="535,127,593,139,592,144,534,132"/>
<area shape="poly" title=" " alt="" coords="813,152,1073,124,1106,121,1107,126,1074,130,814,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a1bb78a35650319fd3c53b1f65f3fb259" title=" " alt="" coords="861,196,1074,237"/>
<area shape="poly" title=" " alt="" coords="814,184,847,190,846,195,813,189"/>
<area shape="poly" title=" " alt="" coords="1027,193,1073,175,1168,133,1170,138,1075,180,1029,198"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a3dad027ee92dd7238a80b03984d98f52_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a3dad027ee92dd7238a80b03984d98f52_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a3dad027ee92dd7238a80b03984d98f52_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a3dad027ee92dd7238a80b03984d98f52_icgraph">
<area shape="rect" title=" " alt="" coords="316,78,578,104"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,5,268,46"/>
<area shape="poly" title=" " alt="" coords="367,77,236,49,237,44,368,72"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,71,262,111"/>
<area shape="poly" title=" " alt="" coords="300,94,262,94,262,88,300,88"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,136,262,177"/>
<area shape="poly" title=" " alt="" coords="368,110,237,138,236,133,367,105"/>
</map>
</div>

</div>
</div>
<a id="a2f82ec4deddf6b6187090979afc88f69" name="a2f82ec4deddf6b6187090979afc88f69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f82ec4deddf6b6187090979afc88f69">&#9670;&#160;</a></span>compute_and_report_alpharank()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank.compute_and_report_alpharank </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_tables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>m</em></span><span class="paramdefsep"> = </span><span class="paramdefval">50</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>alpha</em></span><span class="paramdefsep"> = </span><span class="paramdefval">100</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>verbose</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num_top_strats_to_print</em></span><span class="paramdefsep"> = </span><span class="paramdefval">8</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes and visualizes Alpha-Rank outputs.

Args:
  payoff_tables: List of game payoff tables, one for each agent identity. Each
    payoff_table may be either a numpy array, or a _PayoffTableInterface
    object.
  m: Finite population size.
  alpha: Fermi distribution temperature parameter.
  verbose: Set to True to print intermediate results.
  num_top_strats_to_print: Number of top strategies to print.

Returns:
  pi: AlphaRank stationary distribution/rankings.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00668">668</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  672</span>                                 num_top_strats_to_print=8):</div>
<div class="line"><span class="lineno">  673</span>  <span class="stringliteral">&quot;&quot;&quot;Computes and visualizes Alpha-Rank outputs.</span></div>
<div class="line"><span class="lineno">  674</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  675</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  676</span><span class="stringliteral">    payoff_tables: List of game payoff tables, one for each agent identity. Each</span></div>
<div class="line"><span class="lineno">  677</span><span class="stringliteral">      payoff_table may be either a numpy array, or a _PayoffTableInterface</span></div>
<div class="line"><span class="lineno">  678</span><span class="stringliteral">      object.</span></div>
<div class="line"><span class="lineno">  679</span><span class="stringliteral">    m: Finite population size.</span></div>
<div class="line"><span class="lineno">  680</span><span class="stringliteral">    alpha: Fermi distribution temperature parameter.</span></div>
<div class="line"><span class="lineno">  681</span><span class="stringliteral">    verbose: Set to True to print intermediate results.</span></div>
<div class="line"><span class="lineno">  682</span><span class="stringliteral">    num_top_strats_to_print: Number of top strategies to print.</span></div>
<div class="line"><span class="lineno">  683</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  684</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  685</span><span class="stringliteral">    pi: AlphaRank stationary distribution/rankings.</span></div>
<div class="line"><span class="lineno">  686</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  687</span>  payoffs_are_hpt_format = utils.check_payoffs_are_hpt(payoff_tables)</div>
<div class="line"><span class="lineno">  688</span>  rhos, rho_m, pi, _, _ = compute(payoff_tables, m=m, alpha=alpha)</div>
<div class="line"><span class="lineno">  689</span>  strat_labels = utils.get_strat_profile_labels(payoff_tables,</div>
<div class="line"><span class="lineno">  690</span>                                                payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>  <span class="keywordflow">if</span> verbose:</div>
<div class="line"><span class="lineno">  693</span>    print_results(payoff_tables, payoffs_are_hpt_format, pi=pi)</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>  utils.print_rankings_table(</div>
<div class="line"><span class="lineno">  696</span>      payoff_tables,</div>
<div class="line"><span class="lineno">  697</span>      pi,</div>
<div class="line"><span class="lineno">  698</span>      strat_labels,</div>
<div class="line"><span class="lineno">  699</span>      num_top_strats_to_print=num_top_strats_to_print)</div>
<div class="line"><span class="lineno">  700</span>  m_network_plotter = alpharank_visualizer.NetworkPlot(</div>
<div class="line"><span class="lineno">  701</span>      payoff_tables, rhos, rho_m, pi, strat_labels, num_top_profiles=8)</div>
<div class="line"><span class="lineno">  702</span>  m_network_plotter.compute_and_draw_network()</div>
<div class="line"><span class="lineno">  703</span>  <span class="keywordflow">return</span> pi</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00712">open_spiel.python.egt.alpharank.compute()</a>, and <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00408">open_spiel.python.egt.alpharank.print_results()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a2f82ec4deddf6b6187090979afc88f69_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a2f82ec4deddf6b6187090979afc88f69_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a2f82ec4deddf6b6187090979afc88f69_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a2f82ec4deddf6b6187090979afc88f69_cgraph">
<area shape="rect" title=" " alt="" coords="5,185,268,226"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,161,578,187"/>
<area shape="poly" title=" " alt="" coords="268,190,300,186,301,192,269,195"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a119502729a184a8482674ea8df562537" title=" " alt="" coords="626,219,863,259"/>
<area shape="poly" title=" " alt="" coords="268,210,611,229,611,234,268,216"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a95a5a8272beefadfcb7248a45cdf1729" title=" " alt="" coords="911,31,1124,71"/>
<area shape="poly" title=" " alt="" coords="465,158,533,115,578,92,625,74,694,58,764,49,896,43,896,48,765,54,695,63,627,79,580,97,535,119,468,163"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#abd2b94bd383d0984100561a0acb09d86" title=" " alt="" coords="638,88,851,129"/>
<area shape="poly" title=" " alt="" coords="508,158,634,130,635,135,510,163"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ade5c830cc6602388790d1c7dfb9ee2ec" title=" " alt="" coords="638,153,851,194"/>
<area shape="poly" title=" " alt="" coords="578,171,623,171,623,176,578,176"/>
<area shape="poly" title=" " alt="" coords="510,185,635,212,634,218,508,190"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="1432,88,1644,129"/>
<area shape="poly" title=" " alt="" coords="1091,28,1154,14,1228,5,1307,4,1346,9,1385,17,1417,28,1448,43,1500,76,1498,81,1445,48,1415,33,1383,22,1346,14,1307,10,1229,10,1155,20,1092,33"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a44fe0f038fc5d39f276ed19dfc1aa353" title=" " alt="" coords="1172,31,1384,71"/>
<area shape="poly" title=" " alt="" coords="1124,48,1156,48,1156,54,1124,54"/>
<area shape="poly" title=" " alt="" coords="1374,69,1429,82,1427,87,1373,75"/>
<area shape="poly" title=" " alt="" coords="851,106,1416,106,1416,111,851,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a4169e78268b52116fc103a4cf12a71e2" title=" " alt="" coords="911,145,1124,186"/>
<area shape="poly" title=" " alt="" coords="845,127,903,139,902,144,844,132"/>
<area shape="poly" title=" " alt="" coords="1124,152,1384,124,1416,121,1417,126,1384,130,1124,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a1bb78a35650319fd3c53b1f65f3fb259" title=" " alt="" coords="1172,196,1384,237"/>
<area shape="poly" title=" " alt="" coords="1125,184,1157,190,1156,195,1123,189"/>
<area shape="poly" title=" " alt="" coords="1337,193,1383,175,1478,133,1480,138,1385,180,1339,198"/>
</map>
</div>

</div>
</div>
<a id="a119502729a184a8482674ea8df562537" name="a119502729a184a8482674ea8df562537"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a119502729a184a8482674ea8df562537">&#9670;&#160;</a></span>print_results()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank.print_results </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_tables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoffs_are_hpt_format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>rhos</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>rho_m</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>c</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>pi</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prints the finite-population analysis results.</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00403">403</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  408</span>                  pi=<span class="keywordtype">None</span>):</div>
<div class="line"><span class="lineno">  409</span>  <span class="stringliteral">&quot;&quot;&quot;Prints the finite-population analysis results.&quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  410</span> </div>
<div class="line"><span class="lineno">  411</span>  print(<span class="stringliteral">&#39;Payoff tables:\n&#39;</span>)</div>
<div class="line"><span class="lineno">  412</span>  <span class="keywordflow">if</span> payoffs_are_hpt_format:</div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">for</span> payoff_table <span class="keywordflow">in</span> payoff_tables:</div>
<div class="line"><span class="lineno">  414</span>      print(payoff_table())</div>
<div class="line"><span class="lineno">  415</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  416</span>    print(payoff_tables)</div>
<div class="line"><span class="lineno">  417</span>  <span class="keywordflow">if</span> rho_m <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  418</span>    print(<span class="stringliteral">&#39;\nNeutral fixation probability (rho_m):\n&#39;</span>, rho_m)</div>
<div class="line"><span class="lineno">  419</span>  <span class="keywordflow">if</span> rhos <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> rho_m <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  420</span>    print(<span class="stringliteral">&#39;\nFixation probability matrix (rho_{r,s}/rho_m):\n&#39;</span>,</div>
<div class="line"><span class="lineno">  421</span>          np.around(rhos / rho_m, decimals=2))</div>
<div class="line"><span class="lineno">  422</span>  <span class="keywordflow">if</span> c <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  423</span>    print(<span class="stringliteral">&#39;\nMarkov transition matrix (c):\n&#39;</span>, np.around(c, decimals=2))</div>
<div class="line"><span class="lineno">  424</span>  <span class="keywordflow">if</span> pi <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  425</span>    print(<span class="stringliteral">&#39;\nStationary distribution (pi):\n&#39;</span>, pi)</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span> </div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00712">open_spiel.python.egt.alpharank.compute()</a>, and <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00672">open_spiel.python.egt.alpharank.compute_and_report_alpharank()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a119502729a184a8482674ea8df562537_icgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a119502729a184a8482674ea8df562537_icgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a119502729a184a8482674ea8df562537_icgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a119502729a184a8482674ea8df562537_icgraph">
<area shape="rect" title=" " alt="" coords="626,39,863,79"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="316,72,578,97"/>
<area shape="poly" title=" " alt="" coords="610,73,579,76,578,70,610,68"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a2f82ec4deddf6b6187090979afc88f69" title=" " alt="" coords="5,5,268,46"/>
<area shape="poly" title=" " alt="" coords="611,54,268,35,268,30,611,49"/>
<area shape="poly" title=" " alt="" coords="359,71,247,49,248,44,360,65"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ae26b19ec0d10b0582353a0ad8d2c8bd5" title=" " alt="" coords="11,71,262,111"/>
<area shape="poly" title=" " alt="" coords="300,90,262,91,262,86,300,85"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#aba6e1f38dd2aa9602f192d57e9dfae90" title=" " alt="" coords="11,136,262,177"/>
<area shape="poly" title=" " alt="" coords="374,104,228,138,227,133,372,99"/>
</map>
</div>

</div>
</div>
<a id="a5bd833be2f4b192492640c7ecc05ea78" name="a5bd833be2f4b192492640c7ecc05ea78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bd833be2f4b192492640c7ecc05ea78">&#9670;&#160;</a></span>suggest_alpha()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank.suggest_alpha </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_tables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>tol</em></span><span class="paramdefsep"> = </span><span class="paramdefval">.1</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Suggests an alpha for use in alpha-rank.

The suggested alpha is approximately the smallest possible alpha such that
the ranking has 'settled out'. It is calculated as
-ln(tol)/min_gap_between_payoffs.

The logic behind this settling out is that the fixation probabilities can be
expanded as a series, and the relative size of each term in this series
changes with alpha. As alpha gets larger and larger, one of the terms in
this series comes to dominate, and this causes the ranking to settle
down. Just how fast this domination happens is easy to calculate, and this
function uses it to estimate the alpha by which the ranking has settled.

You can find further discussion at the PR:

https://github.com/deepmind/open_spiel/pull/403

Args:
  payoff_tables: List of game payoff tables, one for each agent identity. Each
    payoff_table may be either a numpy array, or a _PayoffTableInterface
    object.
  tol: the desired gap between the first and second terms in the fixation
    probability expansion. A smaller tolerance leads to a larger alpha, and
    a 'more settled out' ranking.

Returns:
  A suggested alpha.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00792">792</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  792</span><span class="keyword">def </span>suggest_alpha(payoff_tables, tol=.1):</div>
<div class="line"><span class="lineno">  793</span>  <span class="stringliteral">&quot;&quot;&quot;Suggests an alpha for use in alpha-rank.</span></div>
<div class="line"><span class="lineno">  794</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  795</span><span class="stringliteral">  The suggested alpha is approximately the smallest possible alpha such that</span></div>
<div class="line"><span class="lineno">  796</span><span class="stringliteral">  the ranking has &#39;settled out&#39;. It is calculated as</span></div>
<div class="line"><span class="lineno">  797</span><span class="stringliteral">  -ln(tol)/min_gap_between_payoffs.</span></div>
<div class="line"><span class="lineno">  798</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  799</span><span class="stringliteral">  The logic behind this settling out is that the fixation probabilities can be</span></div>
<div class="line"><span class="lineno">  800</span><span class="stringliteral">  expanded as a series, and the relative size of each term in this series</span></div>
<div class="line"><span class="lineno">  801</span><span class="stringliteral">  changes with alpha. As alpha gets larger and larger, one of the terms in</span></div>
<div class="line"><span class="lineno">  802</span><span class="stringliteral">  this series comes to dominate, and this causes the ranking to settle</span></div>
<div class="line"><span class="lineno">  803</span><span class="stringliteral">  down. Just how fast this domination happens is easy to calculate, and this</span></div>
<div class="line"><span class="lineno">  804</span><span class="stringliteral">  function uses it to estimate the alpha by which the ranking has settled.</span></div>
<div class="line"><span class="lineno">  805</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  806</span><span class="stringliteral">  You can find further discussion at the PR:</span></div>
<div class="line"><span class="lineno">  807</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  808</span><span class="stringliteral">  https://github.com/deepmind/open_spiel/pull/403</span></div>
<div class="line"><span class="lineno">  809</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  810</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  811</span><span class="stringliteral">    payoff_tables: List of game payoff tables, one for each agent identity. Each</span></div>
<div class="line"><span class="lineno">  812</span><span class="stringliteral">      payoff_table may be either a numpy array, or a _PayoffTableInterface</span></div>
<div class="line"><span class="lineno">  813</span><span class="stringliteral">      object.</span></div>
<div class="line"><span class="lineno">  814</span><span class="stringliteral">    tol: the desired gap between the first and second terms in the fixation</span></div>
<div class="line"><span class="lineno">  815</span><span class="stringliteral">      probability expansion. A smaller tolerance leads to a larger alpha, and</span></div>
<div class="line"><span class="lineno">  816</span><span class="stringliteral">      a &#39;more settled out&#39; ranking.</span></div>
<div class="line"><span class="lineno">  817</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  818</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  819</span><span class="stringliteral">    A suggested alpha.</span></div>
<div class="line"><span class="lineno">  820</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  821</span>  payoffs_are_hpt_format = utils.check_payoffs_are_hpt(payoff_tables)</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>  num_strats_per_population = utils.get_num_strats_per_population(</div>
<div class="line"><span class="lineno">  824</span>      payoff_tables, payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  825</span>  num_profiles = utils.get_num_profiles(num_strats_per_population)</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>  gap = np.inf</div>
<div class="line"><span class="lineno">  828</span>  <span class="keywordflow">for</span> id_row_profile <span class="keywordflow">in</span> range(num_profiles):</div>
<div class="line"><span class="lineno">  829</span>    row_profile = utils.get_strat_profile_from_id(num_strats_per_population,</div>
<div class="line"><span class="lineno">  830</span>                                                  id_row_profile)</div>
<div class="line"><span class="lineno">  831</span> </div>
<div class="line"><span class="lineno">  832</span>    next_profile_gen = utils.get_valid_next_profiles(num_strats_per_population,</div>
<div class="line"><span class="lineno">  833</span>                                                     row_profile)</div>
<div class="line"><span class="lineno">  834</span> </div>
<div class="line"><span class="lineno">  835</span>    <span class="keywordflow">for</span> index_population_that_changed, col_profile <span class="keywordflow">in</span> next_profile_gen:</div>
<div class="line"><span class="lineno">  836</span>      payoff_table_k = payoff_tables[index_population_that_changed]</div>
<div class="line"><span class="lineno">  837</span>      f_r = _get_payoff(payoff_table_k, payoffs_are_hpt_format, col_profile,</div>
<div class="line"><span class="lineno">  838</span>                        index_population_that_changed)</div>
<div class="line"><span class="lineno">  839</span>      f_s = _get_payoff(payoff_table_k, payoffs_are_hpt_format, row_profile,</div>
<div class="line"><span class="lineno">  840</span>                        index_population_that_changed)</div>
<div class="line"><span class="lineno">  841</span>      <span class="keywordflow">if</span> f_r &gt; f_s:</div>
<div class="line"><span class="lineno">  842</span>        gap = min(gap, f_r - f_s)</div>
<div class="line"><span class="lineno">  843</span> </div>
<div class="line"><span class="lineno">  844</span>  <span class="keywordflow">return</span> -np.log(tol)/gap</div>
<div class="line"><span class="lineno">  845</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00033">open_spiel.python.egt.alpharank._get_payoff()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a5bd833be2f4b192492640c7ecc05ea78_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a5bd833be2f4b192492640c7ecc05ea78_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a5bd833be2f4b192492640c7ecc05ea78_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_a5bd833be2f4b192492640c7ecc05ea78_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,264,46"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="312,5,524,46"/>
<area shape="poly" title=" " alt="" coords="264,23,296,23,296,28,264,28"/>
</map>
</div>

</div>
</div>
<a id="ae26b19ec0d10b0582353a0ad8d2c8bd5" name="ae26b19ec0d10b0582353a0ad8d2c8bd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae26b19ec0d10b0582353a0ad8d2c8bd5">&#9670;&#160;</a></span>sweep_pi_vs_alpha()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank.sweep_pi_vs_alpha </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_tables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>strat_labels</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>warm_start_alpha</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>visualize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>return_alpha</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>m</em></span><span class="paramdefsep"> = </span><span class="paramdefval">50</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>rtol</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1e-5</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>atol</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1e-8</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num_strats_to_label</em></span><span class="paramdefsep"> = </span><span class="paramdefval">10</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>legend_sort_clusters</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes stationary distribution, pi, for range of selection intensities.

The range of selection intensities is defined in alpha_list and corresponds
to the temperature of the Fermi selection function.

Args:
  payoff_tables: List of game payoff tables, one for each agent identity. Each
    payoff_table may be either a numpy array, or a _PayoffTableInterface
    object.
  strat_labels: Human-readable strategy labels. See get_strat_profile_labels()
    in utils.py for formatting details.
  warm_start_alpha: Initial value of alpha to use.
  visualize: Plot the sweep results.
  return_alpha: Whether to return the final alpha used.
  m: AlphaRank population size.
  rtol: The relative tolerance parameter for np.allclose calls.
  atol: The absolute tolerance parameter for np.allclose calls.
  num_strats_to_label: Number of strats to label in legend
  legend_sort_clusters: If true, strategies in the same cluster are sorted in
    the legend according to orderings for earlier alpha values. Primarily for
    visualization purposes! Rankings for lower alpha values should be
    interpreted carefully.

Returns:
 pi: AlphaRank stationary distribution.
 alpha: The AlphaRank selection-intensity level resulting from sweep.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00559">559</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  568</span>                      legend_sort_clusters=<span class="keyword">False</span>):</div>
<div class="line"><span class="lineno">  569</span>  <span class="stringliteral">&quot;&quot;&quot;Computes stationary distribution, pi, for range of selection intensities.</span></div>
<div class="line"><span class="lineno">  570</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  571</span><span class="stringliteral">  The range of selection intensities is defined in alpha_list and corresponds</span></div>
<div class="line"><span class="lineno">  572</span><span class="stringliteral">  to the temperature of the Fermi selection function.</span></div>
<div class="line"><span class="lineno">  573</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  574</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  575</span><span class="stringliteral">    payoff_tables: List of game payoff tables, one for each agent identity. Each</span></div>
<div class="line"><span class="lineno">  576</span><span class="stringliteral">      payoff_table may be either a numpy array, or a _PayoffTableInterface</span></div>
<div class="line"><span class="lineno">  577</span><span class="stringliteral">      object.</span></div>
<div class="line"><span class="lineno">  578</span><span class="stringliteral">    strat_labels: Human-readable strategy labels. See get_strat_profile_labels()</span></div>
<div class="line"><span class="lineno">  579</span><span class="stringliteral">      in utils.py for formatting details.</span></div>
<div class="line"><span class="lineno">  580</span><span class="stringliteral">    warm_start_alpha: Initial value of alpha to use.</span></div>
<div class="line"><span class="lineno">  581</span><span class="stringliteral">    visualize: Plot the sweep results.</span></div>
<div class="line"><span class="lineno">  582</span><span class="stringliteral">    return_alpha: Whether to return the final alpha used.</span></div>
<div class="line"><span class="lineno">  583</span><span class="stringliteral">    m: AlphaRank population size.</span></div>
<div class="line"><span class="lineno">  584</span><span class="stringliteral">    rtol: The relative tolerance parameter for np.allclose calls.</span></div>
<div class="line"><span class="lineno">  585</span><span class="stringliteral">    atol: The absolute tolerance parameter for np.allclose calls.</span></div>
<div class="line"><span class="lineno">  586</span><span class="stringliteral">    num_strats_to_label: Number of strats to label in legend</span></div>
<div class="line"><span class="lineno">  587</span><span class="stringliteral">    legend_sort_clusters: If true, strategies in the same cluster are sorted in</span></div>
<div class="line"><span class="lineno">  588</span><span class="stringliteral">      the legend according to orderings for earlier alpha values. Primarily for</span></div>
<div class="line"><span class="lineno">  589</span><span class="stringliteral">      visualization purposes! Rankings for lower alpha values should be</span></div>
<div class="line"><span class="lineno">  590</span><span class="stringliteral">      interpreted carefully.</span></div>
<div class="line"><span class="lineno">  591</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  592</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  593</span><span class="stringliteral">   pi: AlphaRank stationary distribution.</span></div>
<div class="line"><span class="lineno">  594</span><span class="stringliteral">   alpha: The AlphaRank selection-intensity level resulting from sweep.</span></div>
<div class="line"><span class="lineno">  595</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  596</span> </div>
<div class="line"><span class="lineno">  597</span>  payoffs_are_hpt_format = utils.check_payoffs_are_hpt(payoff_tables)</div>
<div class="line"><span class="lineno">  598</span>  num_populations = len(payoff_tables)</div>
<div class="line"><span class="lineno">  599</span>  num_strats_per_population = utils.get_num_strats_per_population(</div>
<div class="line"><span class="lineno">  600</span>      payoff_tables, payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  601</span> </div>
<div class="line"><span class="lineno">  602</span>  <span class="keywordflow">if</span> num_populations == 1:</div>
<div class="line"><span class="lineno">  603</span>    num_profiles = num_strats_per_population[0]</div>
<div class="line"><span class="lineno">  604</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  605</span>    num_profiles = utils.get_num_profiles(num_strats_per_population)</div>
<div class="line"><span class="lineno">  606</span> </div>
<div class="line"><span class="lineno">  607</span>  <span class="keyword">assert</span> (strat_labels <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> isinstance(strat_labels, dict)</div>
<div class="line"><span class="lineno">  608</span>          <span class="keywordflow">or</span> (len(strat_labels) == num_profiles))</div>
<div class="line"><span class="lineno">  609</span> </div>
<div class="line"><span class="lineno">  610</span>  pi_list = np.empty((num_profiles, 0))</div>
<div class="line"><span class="lineno">  611</span>  alpha_list = []</div>
<div class="line"><span class="lineno">  612</span>  num_iters = 0</div>
<div class="line"><span class="lineno">  613</span>  alpha_mult_factor = 2.</div>
<div class="line"><span class="lineno">  614</span> </div>
<div class="line"><span class="lineno">  615</span>  <span class="keywordflow">if</span> warm_start_alpha <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  616</span>    alpha = warm_start_alpha</div>
<div class="line"><span class="lineno">  617</span>    alpharank_succeeded_once = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  618</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  619</span>    alpha = 1e-4  <span class="comment"># Reasonable default for most games, can be user-overridden</span></div>
<div class="line"><span class="lineno">  620</span> </div>
<div class="line"><span class="lineno">  621</span>  <span class="keywordflow">while</span> 1:</div>
<div class="line"><span class="lineno">  622</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  623</span>      _, _, pi, _, _ = compute(payoff_tables, alpha=alpha, m=m)</div>
<div class="line"><span class="lineno">  624</span>      pi_list = np.append(pi_list, np.reshape(pi, (-1, 1)), axis=1)</div>
<div class="line"><span class="lineno">  625</span>      alpha_list.append(alpha)</div>
<div class="line"><span class="lineno">  626</span>      <span class="comment"># Stop when pi converges</span></div>
<div class="line"><span class="lineno">  627</span>      <span class="keywordflow">if</span> num_iters &gt; 0 <span class="keywordflow">and</span> np.allclose(pi, pi_list[:, num_iters - 1], rtol,</div>
<div class="line"><span class="lineno">  628</span>                                       atol):</div>
<div class="line"><span class="lineno">  629</span>        <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  630</span>      alpha *= alpha_mult_factor</div>
<div class="line"><span class="lineno">  631</span>      num_iters += 1</div>
<div class="line"><span class="lineno">  632</span>      alpharank_succeeded_once = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  633</span>    <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> _:</div>
<div class="line"><span class="lineno">  634</span>      <span class="keywordflow">if</span> warm_start_alpha <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> <span class="keywordflow">not</span> alpharank_succeeded_once:</div>
<div class="line"><span class="lineno">  635</span>        <span class="comment"># When warm_start_alpha is used, there&#39;s a chance that</span></div>
<div class="line"><span class="lineno">  636</span>        <span class="comment"># the initial warm_start_alpha is too large and causes exceptions due to</span></div>
<div class="line"><span class="lineno">  637</span>        <span class="comment"># the Markov transition matrix being reducible. So keep decreasing until</span></div>
<div class="line"><span class="lineno">  638</span>        <span class="comment"># a single success occurs.</span></div>
<div class="line"><span class="lineno">  639</span>        alpha /= 2</div>
<div class="line"><span class="lineno">  640</span>      <span class="keywordflow">elif</span> <span class="keywordflow">not</span> np.allclose(pi_list[:, -1], pi_list[:, -2], rtol, atol):</div>
<div class="line"><span class="lineno">  641</span>        <span class="comment"># Sweep stopped due to multiple stationary distributions, but pi had</span></div>
<div class="line"><span class="lineno">  642</span>        <span class="comment"># not converged due to the alpha scaling being too large.</span></div>
<div class="line"><span class="lineno">  643</span>        alpha /= alpha_mult_factor</div>
<div class="line"><span class="lineno">  644</span>        alpha_mult_factor = (alpha_mult_factor + 1.) / 2.</div>
<div class="line"><span class="lineno">  645</span>        alpha *= alpha_mult_factor</div>
<div class="line"><span class="lineno">  646</span>      <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  647</span>        <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  648</span> </div>
<div class="line"><span class="lineno">  649</span>  <span class="keywordflow">if</span> visualize:</div>
<div class="line"><span class="lineno">  650</span>    <span class="keywordflow">if</span> strat_labels <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  651</span>      strat_labels = utils.get_strat_profile_labels(payoff_tables,</div>
<div class="line"><span class="lineno">  652</span>                                                    payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  653</span>    alpharank_visualizer.plot_pi_vs_alpha(</div>
<div class="line"><span class="lineno">  654</span>        pi_list.T,</div>
<div class="line"><span class="lineno">  655</span>        alpha_list,</div>
<div class="line"><span class="lineno">  656</span>        num_populations,</div>
<div class="line"><span class="lineno">  657</span>        num_strats_per_population,</div>
<div class="line"><span class="lineno">  658</span>        strat_labels,</div>
<div class="line"><span class="lineno">  659</span>        num_strats_to_label=num_strats_to_label,</div>
<div class="line"><span class="lineno">  660</span>        legend_sort_clusters=legend_sort_clusters)</div>
<div class="line"><span class="lineno">  661</span> </div>
<div class="line"><span class="lineno">  662</span>  <span class="keywordflow">if</span> return_alpha:</div>
<div class="line"><span class="lineno">  663</span>    <span class="keywordflow">return</span> pi, alpha</div>
<div class="line"><span class="lineno">  664</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  665</span>    <span class="keywordflow">return</span> pi</div>
<div class="line"><span class="lineno">  666</span> </div>
<div class="line"><span class="lineno">  667</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00712">open_spiel.python.egt.alpharank.compute()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_ae26b19ec0d10b0582353a0ad8d2c8bd5_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_ae26b19ec0d10b0582353a0ad8d2c8bd5_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_ae26b19ec0d10b0582353a0ad8d2c8bd5_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_ae26b19ec0d10b0582353a0ad8d2c8bd5_cgraph">
<area shape="rect" title=" " alt="" coords="5,121,256,162"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="304,129,566,155"/>
<area shape="poly" title=" " alt="" coords="256,139,288,139,288,144,256,144"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a95a5a8272beefadfcb7248a45cdf1729" title=" " alt="" coords="899,31,1112,71"/>
<area shape="poly" title=" " alt="" coords="463,126,531,99,613,74,682,62,753,54,883,47,884,53,753,59,683,67,615,79,532,104,465,131"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#abd2b94bd383d0984100561a0acb09d86" title=" " alt="" coords="626,88,839,129"/>
<area shape="poly" title=" " alt="" coords="555,126,610,119,611,125,556,131"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ade5c830cc6602388790d1c7dfb9ee2ec" title=" " alt="" coords="626,153,839,194"/>
<area shape="poly" title=" " alt="" coords="561,153,611,158,610,163,560,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a119502729a184a8482674ea8df562537" title=" " alt="" coords="614,219,851,259"/>
<area shape="poly" title=" " alt="" coords="472,153,615,203,641,211,640,217,613,208,470,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="1420,88,1632,129"/>
<area shape="poly" title=" " alt="" coords="1079,28,1142,14,1216,5,1295,4,1334,9,1373,17,1405,28,1436,43,1488,76,1486,81,1433,48,1403,33,1371,22,1334,14,1295,10,1217,10,1143,20,1080,33"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a44fe0f038fc5d39f276ed19dfc1aa353" title=" " alt="" coords="1160,31,1372,71"/>
<area shape="poly" title=" " alt="" coords="1112,48,1144,48,1144,54,1112,54"/>
<area shape="poly" title=" " alt="" coords="1362,69,1417,82,1415,87,1361,75"/>
<area shape="poly" title=" " alt="" coords="839,106,1404,106,1404,111,839,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a4169e78268b52116fc103a4cf12a71e2" title=" " alt="" coords="899,145,1112,186"/>
<area shape="poly" title=" " alt="" coords="833,127,891,139,890,144,832,132"/>
<area shape="poly" title=" " alt="" coords="1112,152,1372,124,1404,121,1405,126,1372,130,1112,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a1bb78a35650319fd3c53b1f65f3fb259" title=" " alt="" coords="1160,196,1372,237"/>
<area shape="poly" title=" " alt="" coords="1113,184,1145,190,1144,195,1111,189"/>
<area shape="poly" title=" " alt="" coords="1325,193,1371,175,1466,133,1468,138,1373,180,1327,198"/>
</map>
</div>

</div>
</div>
<a id="aba6e1f38dd2aa9602f192d57e9dfae90" name="aba6e1f38dd2aa9602f192d57e9dfae90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba6e1f38dd2aa9602f192d57e9dfae90">&#9670;&#160;</a></span>sweep_pi_vs_epsilon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">open_spiel.python.egt.alpharank.sweep_pi_vs_epsilon </td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>payoff_tables</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>strat_labels</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>warm_start_epsilon</em></span><span class="paramdefsep"> = </span><span class="paramdefval">None</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>visualize</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>return_epsilon</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>min_iters</em></span><span class="paramdefsep"> = </span><span class="paramdefval">10</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>max_iters</em></span><span class="paramdefsep"> = </span><span class="paramdefval">100</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>min_epsilon</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1e-14</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>num_strats_to_label</em></span><span class="paramdefsep"> = </span><span class="paramdefval">10</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>legend_sort_clusters</em></span><span class="paramdefsep"> = </span><span class="paramdefval">False</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Computes infinite-alpha distribution for a range of perturbations.

The range of response graph perturbations is defined in epsilon_list.

Note that min_iters and max_iters is necessary as it may sometimes appear the
stationary distribution has converged for a game in the first few iterations,
where in reality a sufficiently smaller epsilon is needed for the distribution
to first diverge, then reconverge. This behavior is dependent on both the
payoff structure and bounds, so the parameters min_iters and max_iters can be
used to fine-tune this.

Args:
  payoff_tables: List of game payoff tables, one for each agent identity.
    Each payoff_table may be either a numpy array, or a
    _PayoffTableInterface object.
  strat_labels: Human-readable strategy labels. See get_strat_profile_labels()
    in utils.py for formatting details.
  warm_start_epsilon: Initial value of epsilon to use.
  visualize: Plot the sweep results.
  return_epsilon: Whether to return the final epsilon used.
  min_iters: the minimum number of sweep iterations.
  max_iters: the maximum number of sweep iterations.
  min_epsilon: the minimum value of epsilon to be tested, at which point the
    sweep terminates (if not converged already).
  num_strats_to_label: Number of strats to label in legend
  legend_sort_clusters: If true, strategies in the same cluster are sorted in
    the legend according to orderings for earlier alpha values. Primarily for
    visualization purposes! Rankings for lower alpha values should be
    interpreted carefully.

Returns:
 pi: AlphaRank stationary distribution.
 epsilon: The AlphaRank transition matrix noise level resulting from sweep.
</pre> 
<p class="definition">Definition at line <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00428">428</a> of file <a class="el" href="../../d9/db6/alpharank_8py_source.html">alpharank.py</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  437</span>                        legend_sort_clusters=<span class="keyword">False</span>):</div>
<div class="line"><span class="lineno">  438</span>  <span class="stringliteral">&quot;&quot;&quot;Computes infinite-alpha distribution for a range of perturbations.</span></div>
<div class="line"><span class="lineno">  439</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  440</span><span class="stringliteral">  The range of response graph perturbations is defined in epsilon_list.</span></div>
<div class="line"><span class="lineno">  441</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  442</span><span class="stringliteral">  Note that min_iters and max_iters is necessary as it may sometimes appear the</span></div>
<div class="line"><span class="lineno">  443</span><span class="stringliteral">  stationary distribution has converged for a game in the first few iterations,</span></div>
<div class="line"><span class="lineno">  444</span><span class="stringliteral">  where in reality a sufficiently smaller epsilon is needed for the distribution</span></div>
<div class="line"><span class="lineno">  445</span><span class="stringliteral">  to first diverge, then reconverge. This behavior is dependent on both the</span></div>
<div class="line"><span class="lineno">  446</span><span class="stringliteral">  payoff structure and bounds, so the parameters min_iters and max_iters can be</span></div>
<div class="line"><span class="lineno">  447</span><span class="stringliteral">  used to fine-tune this.</span></div>
<div class="line"><span class="lineno">  448</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  449</span><span class="stringliteral">  Args:</span></div>
<div class="line"><span class="lineno">  450</span><span class="stringliteral">    payoff_tables: List of game payoff tables, one for each agent identity.</span></div>
<div class="line"><span class="lineno">  451</span><span class="stringliteral">      Each payoff_table may be either a numpy array, or a</span></div>
<div class="line"><span class="lineno">  452</span><span class="stringliteral">      _PayoffTableInterface object.</span></div>
<div class="line"><span class="lineno">  453</span><span class="stringliteral">    strat_labels: Human-readable strategy labels. See get_strat_profile_labels()</span></div>
<div class="line"><span class="lineno">  454</span><span class="stringliteral">      in utils.py for formatting details.</span></div>
<div class="line"><span class="lineno">  455</span><span class="stringliteral">    warm_start_epsilon: Initial value of epsilon to use.</span></div>
<div class="line"><span class="lineno">  456</span><span class="stringliteral">    visualize: Plot the sweep results.</span></div>
<div class="line"><span class="lineno">  457</span><span class="stringliteral">    return_epsilon: Whether to return the final epsilon used.</span></div>
<div class="line"><span class="lineno">  458</span><span class="stringliteral">    min_iters: the minimum number of sweep iterations.</span></div>
<div class="line"><span class="lineno">  459</span><span class="stringliteral">    max_iters: the maximum number of sweep iterations.</span></div>
<div class="line"><span class="lineno">  460</span><span class="stringliteral">    min_epsilon: the minimum value of epsilon to be tested, at which point the</span></div>
<div class="line"><span class="lineno">  461</span><span class="stringliteral">      sweep terminates (if not converged already).</span></div>
<div class="line"><span class="lineno">  462</span><span class="stringliteral">    num_strats_to_label: Number of strats to label in legend</span></div>
<div class="line"><span class="lineno">  463</span><span class="stringliteral">    legend_sort_clusters: If true, strategies in the same cluster are sorted in</span></div>
<div class="line"><span class="lineno">  464</span><span class="stringliteral">      the legend according to orderings for earlier alpha values. Primarily for</span></div>
<div class="line"><span class="lineno">  465</span><span class="stringliteral">      visualization purposes! Rankings for lower alpha values should be</span></div>
<div class="line"><span class="lineno">  466</span><span class="stringliteral">      interpreted carefully.</span></div>
<div class="line"><span class="lineno">  467</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno">  468</span><span class="stringliteral">  Returns:</span></div>
<div class="line"><span class="lineno">  469</span><span class="stringliteral">   pi: AlphaRank stationary distribution.</span></div>
<div class="line"><span class="lineno">  470</span><span class="stringliteral">   epsilon: The AlphaRank transition matrix noise level resulting from sweep.</span></div>
<div class="line"><span class="lineno">  471</span><span class="stringliteral">  &quot;&quot;&quot;</span></div>
<div class="line"><span class="lineno">  472</span>  payoffs_are_hpt_format = utils.check_payoffs_are_hpt(payoff_tables)</div>
<div class="line"><span class="lineno">  473</span>  num_populations = len(payoff_tables)</div>
<div class="line"><span class="lineno">  474</span>  num_strats_per_population = utils.get_num_strats_per_population(</div>
<div class="line"><span class="lineno">  475</span>      payoff_tables, payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>  <span class="keywordflow">if</span> num_populations == 1:</div>
<div class="line"><span class="lineno">  478</span>    num_profiles = num_strats_per_population[0]</div>
<div class="line"><span class="lineno">  479</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  480</span>    num_profiles = utils.get_num_profiles(num_strats_per_population)</div>
<div class="line"><span class="lineno">  481</span> </div>
<div class="line"><span class="lineno">  482</span>  <span class="keyword">assert</span> (strat_labels <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">or</span> isinstance(strat_labels, dict)</div>
<div class="line"><span class="lineno">  483</span>          <span class="keywordflow">or</span> (len(strat_labels) == num_profiles))</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>  pi_list = np.empty((num_profiles, 0))</div>
<div class="line"><span class="lineno">  486</span>  pi, alpha, m = <span class="keywordtype">None</span>, <span class="keywordtype">None</span>, <span class="keywordtype">None</span>  <span class="comment"># Unused in infinite-alpha regime</span></div>
<div class="line"><span class="lineno">  487</span>  epsilon_list = []</div>
<div class="line"><span class="lineno">  488</span>  epsilon_pi_hist = {}</div>
<div class="line"><span class="lineno">  489</span>  num_iters = 0</div>
<div class="line"><span class="lineno">  490</span> </div>
<div class="line"><span class="lineno">  491</span>  epsilon_mult_factor = 0.5</div>
<div class="line"><span class="lineno">  492</span>  alpharank_succeeded_once = <span class="keyword">False</span></div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>  <span class="keywordflow">if</span> warm_start_epsilon <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  495</span>    epsilon = warm_start_epsilon</div>
<div class="line"><span class="lineno">  496</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  497</span>    epsilon = 0.5</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>  <span class="keywordflow">while</span> <span class="keyword">True</span>:</div>
<div class="line"><span class="lineno">  500</span>    <span class="keywordflow">try</span>:</div>
<div class="line"><span class="lineno">  501</span>      pi_prev = pi</div>
<div class="line"><span class="lineno">  502</span>      _, _, pi, _, _ = compute(payoff_tables, m=m, alpha=alpha,</div>
<div class="line"><span class="lineno">  503</span>                               use_inf_alpha=<span class="keyword">True</span>, inf_alpha_eps=epsilon)</div>
<div class="line"><span class="lineno">  504</span>      epsilon_pi_hist[epsilon] = pi</div>
<div class="line"><span class="lineno">  505</span>      <span class="comment"># Stop when pi converges</span></div>
<div class="line"><span class="lineno">  506</span>      <span class="keywordflow">if</span> num_iters &gt; min_iters <span class="keywordflow">and</span> np.allclose(pi, pi_prev):</div>
<div class="line"><span class="lineno">  507</span>        <span class="keywordflow">break</span></div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>      epsilon *= epsilon_mult_factor</div>
<div class="line"><span class="lineno">  510</span>      num_iters += 1</div>
<div class="line"><span class="lineno">  511</span>      alpharank_succeeded_once = <span class="keyword">True</span></div>
<div class="line"><span class="lineno">  512</span>      <span class="keyword">assert</span> num_iters &lt; max_iters, (<span class="stringliteral">&#39;Alpharank stationary distr. not found&#39;</span></div>
<div class="line"><span class="lineno">  513</span>                                     <span class="stringliteral">&#39;after {} iterations of pi_vs_epsilon&#39;</span></div>
<div class="line"><span class="lineno">  514</span>                                     <span class="stringliteral">&#39;sweep&#39;</span>.format(num_iters))</div>
<div class="line"><span class="lineno">  515</span> </div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">except</span> ValueError <span class="keyword">as</span> _:</div>
<div class="line"><span class="lineno">  517</span>      print(<span class="stringliteral">&#39;Error: &#39;</span>, _, epsilon, min_epsilon)</div>
<div class="line"><span class="lineno">  518</span>      <span class="comment"># Case where epsilon has been decreased beyond desirable limits but no</span></div>
<div class="line"><span class="lineno">  519</span>      <span class="comment"># distribution found.</span></div>
<div class="line"><span class="lineno">  520</span>      <span class="keyword">assert</span> epsilon &gt;= min_epsilon, (<span class="stringliteral">&#39;AlphaRank stationary distr. not found &amp;&#39;</span></div>
<div class="line"><span class="lineno">  521</span>                                      <span class="stringliteral">&#39;epsilon &lt; min_epsilon.&#39;</span>)</div>
<div class="line"><span class="lineno">  522</span>      <span class="comment"># Case where epsilon &gt;= min_epsilon, but still small enough that it causes</span></div>
<div class="line"><span class="lineno">  523</span>      <span class="comment"># causes exceptions due to precision issues. So increase it.</span></div>
<div class="line"><span class="lineno">  524</span>      epsilon /= epsilon_mult_factor</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>      <span class="comment"># Case where alpharank_succeeded_once (i.e., epsilon_list and pi_list have</span></div>
<div class="line"><span class="lineno">  527</span>      <span class="comment"># at least one entry), and a) has not converged yet and b) failed on this</span></div>
<div class="line"><span class="lineno">  528</span>      <span class="comment"># instance due to epsilon being too small. I.e., the rate of decreasing</span></div>
<div class="line"><span class="lineno">  529</span>      <span class="comment"># of epsilon is too high.</span></div>
<div class="line"><span class="lineno">  530</span>      <span class="keywordflow">if</span> alpharank_succeeded_once:</div>
<div class="line"><span class="lineno">  531</span>        epsilon_mult_factor = (epsilon_mult_factor+1.)/2.</div>
<div class="line"><span class="lineno">  532</span>        epsilon *= epsilon_mult_factor</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span>  epsilon_list, pi_list = zip(*[(epsilon, epsilon_pi_hist[epsilon])</div>
<div class="line"><span class="lineno">  535</span>                                <span class="keywordflow">for</span> epsilon <span class="keywordflow">in</span> sorted(epsilon_pi_hist.keys(),</div>
<div class="line"><span class="lineno">  536</span>                                                      reverse=<span class="keyword">True</span>)])</div>
<div class="line"><span class="lineno">  537</span>  pi_list = np.asarray(pi_list)</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>  <span class="keywordflow">if</span> visualize:</div>
<div class="line"><span class="lineno">  540</span>    <span class="keywordflow">if</span> strat_labels <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line"><span class="lineno">  541</span>      strat_labels = utils.get_strat_profile_labels(payoff_tables,</div>
<div class="line"><span class="lineno">  542</span>                                                    payoffs_are_hpt_format)</div>
<div class="line"><span class="lineno">  543</span>    alpharank_visualizer.plot_pi_vs_alpha(</div>
<div class="line"><span class="lineno">  544</span>        pi_list.T,</div>
<div class="line"><span class="lineno">  545</span>        epsilon_list,</div>
<div class="line"><span class="lineno">  546</span>        num_populations,</div>
<div class="line"><span class="lineno">  547</span>        num_strats_per_population,</div>
<div class="line"><span class="lineno">  548</span>        strat_labels,</div>
<div class="line"><span class="lineno">  549</span>        num_strats_to_label=num_strats_to_label,</div>
<div class="line"><span class="lineno">  550</span>        legend_sort_clusters=legend_sort_clusters,</div>
<div class="line"><span class="lineno">  551</span>        xlabel=<span class="stringliteral">r&#39;Infinite-AlphaRank Noise $\epsilon$&#39;</span>)</div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>  <span class="keywordflow">if</span> return_epsilon:</div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">return</span> pi_list[-1], epsilon_list[-1]</div>
<div class="line"><span class="lineno">  555</span>  <span class="keywordflow">else</span>:</div>
<div class="line"><span class="lineno">  556</span>    <span class="keywordflow">return</span> pi_list[-1]</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span> </div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/db6/alpharank_8py_source.html#l00712">open_spiel.python.egt.alpharank.compute()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_aba6e1f38dd2aa9602f192d57e9dfae90_cgraph.png" border="0" usemap="#ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_aba6e1f38dd2aa9602f192d57e9dfae90_cgraph" alt=""/></div>
<map name="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_aba6e1f38dd2aa9602f192d57e9dfae90_cgraph" id="ade/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank_aba6e1f38dd2aa9602f192d57e9dfae90_cgraph">
<area shape="rect" title=" " alt="" coords="5,121,256,162"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a3dad027ee92dd7238a80b03984d98f52" title=" " alt="" coords="304,129,566,155"/>
<area shape="poly" title=" " alt="" coords="256,139,288,139,288,144,256,144"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a95a5a8272beefadfcb7248a45cdf1729" title=" " alt="" coords="899,31,1112,71"/>
<area shape="poly" title=" " alt="" coords="463,126,531,99,613,74,682,62,753,54,883,47,884,53,753,59,683,67,615,79,532,104,465,131"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#abd2b94bd383d0984100561a0acb09d86" title=" " alt="" coords="626,88,839,129"/>
<area shape="poly" title=" " alt="" coords="555,126,610,119,611,125,556,131"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#ade5c830cc6602388790d1c7dfb9ee2ec" title=" " alt="" coords="626,153,839,194"/>
<area shape="poly" title=" " alt="" coords="561,153,611,158,610,163,560,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a119502729a184a8482674ea8df562537" title=" " alt="" coords="614,219,851,259"/>
<area shape="poly" title=" " alt="" coords="472,153,615,203,641,211,640,217,613,208,470,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a36f325f6c22bc87614cea4e3afb6dc67" title=" " alt="" coords="1420,88,1632,129"/>
<area shape="poly" title=" " alt="" coords="1079,28,1142,14,1216,5,1295,4,1334,9,1373,17,1405,28,1436,43,1488,76,1486,81,1433,48,1403,33,1371,22,1334,14,1295,10,1217,10,1143,20,1080,33"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a44fe0f038fc5d39f276ed19dfc1aa353" title=" " alt="" coords="1160,31,1372,71"/>
<area shape="poly" title=" " alt="" coords="1112,48,1144,48,1144,54,1112,54"/>
<area shape="poly" title=" " alt="" coords="1362,69,1417,82,1415,87,1361,75"/>
<area shape="poly" title=" " alt="" coords="839,106,1404,106,1404,111,839,111"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a4169e78268b52116fc103a4cf12a71e2" title=" " alt="" coords="899,145,1112,186"/>
<area shape="poly" title=" " alt="" coords="833,127,891,139,890,144,832,132"/>
<area shape="poly" title=" " alt="" coords="1112,152,1372,124,1404,121,1405,126,1372,130,1112,158"/>
<area shape="rect" href="../../de/d45/namespaceopen__spiel_1_1python_1_1egt_1_1alpharank.html#a1bb78a35650319fd3c53b1f65f3fb259" title=" " alt="" coords="1160,196,1372,237"/>
<area shape="poly" title=" " alt="" coords="1113,184,1145,190,1144,195,1111,189"/>
<area shape="poly" title=" " alt="" coords="1325,193,1371,175,1466,133,1468,138,1373,180,1327,198"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
